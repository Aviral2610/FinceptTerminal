import{b as Ao,r as d}from"./react-vendor-9XN-Nagm.js";import{i as Mi,a as Yn,b as Ai,c as Zn,d as Ti,e as $i,f as ki}from"./chart-vendor-BDuuUcnU.js";var Qe={exports:{}},Je={};var Un;function Ii(){if(Un)return Je;Un=1;var t=Ao();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,o=t.useState,r=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function c(f,p){var g=p(),_=o({inst:{value:g,getSnapshot:p}}),y=_[0].inst,x=_[1];return i(function(){y.value=g,y.getSnapshot=p,a(y)&&x({inst:y})},[f,g,p]),r(function(){return a(y)&&x({inst:y}),f(function(){a(y)&&x({inst:y})})},[f]),s(g),g}function a(f){var p=f.getSnapshot;f=f.value;try{var g=p();return!n(f,g)}catch{return!0}}function u(f,p){return p()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:c;return Je.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,Je}var Wn;function zi(){return Wn||(Wn=1,Qe.exports=Ii()),Qe.exports}function it(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,o;n<t.length;n++)(o=it(t[n]))!==""&&(e+=(e&&" ")+o);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var je={exports:{}},tn={};var Xn;function Ri(){if(Xn)return tn;Xn=1;var t=Ao(),e=zi();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var o=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,c=t.useMemo,a=t.useDebugValue;return tn.useSyncExternalStoreWithSelector=function(u,l,f,p,g){var _=i(null);if(_.current===null){var y={hasValue:!1,value:null};_.current=y}else y=_.current;_=c(function(){function m(C){if(!S){if(S=!0,N=C,C=p(C),g!==void 0&&y.hasValue){var z=y.value;if(g(z,C))return w=z}return w=C}if(z=w,o(N,C))return z;var H=p(C);return g!==void 0&&g(z,H)?(N=C,z):(N=C,w=H)}var S=!1,N,w,A=f===void 0?null:f;return[function(){return m(l())},A===null?void 0:function(){return m(A())}]},[l,f,p,g]);var x=r(u,_[0],_[1]);return s(function(){y.hasValue=!0,y.value=x},[x]),a(x),x},tn}var Gn;function Di(){return Gn||(Gn=1,je.exports=Ri()),je.exports}var Hi=Di();const Pi={},Kn=t=>{let e;const n=new Set,o=(l,f)=>{const p=typeof l=="function"?l(e):l;if(!Object.is(p,e)){const g=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(_=>_(e,g))}},r=()=>e,a={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Pi?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(o,r,a);return a},Vi=t=>t?Kn(t):Kn,{useDebugValue:Bi}=d,{useSyncExternalStoreWithSelector:Oi}=Hi,Fi=t=>t;function To(t,e=Fi,n){const o=Oi(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Bi(o),o}const qn=(t,e)=>{const n=Vi(t),o=(r,i=e)=>To(n,r,i);return Object.assign(o,n),o},Li=(t,e)=>t?qn(t,e):qn;function ot(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(e,o)||!Object.is(t[o],e[o]))return!1;return!0}var Yi={value:()=>{}};function Oe(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ae(n)}function Ae(t){this._=t}function Zi(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ae.prototype=Oe.prototype={constructor:Ae,on:function(t,e){var n=this._,o=Zi(t+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(t=o[i]).type)&&(r=Ui(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(r=(t=o[i]).type)n[r]=Qn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Qn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ae(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)}};function Ui(t,e){for(var n=0,o=t.length,r;n<o;++n)if((r=t[n]).name===e)return r.value}function Qn(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=Yi,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var un="http://www.w3.org/1999/xhtml";const Jn={svg:"http://www.w3.org/2000/svg",xhtml:un,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Jn.hasOwnProperty(e)?{space:Jn[e],local:t}:t}function Wi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===un&&e.documentElement.namespaceURI===un?e.createElement(t):e.createElementNS(n,t)}}function Xi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $o(t){var e=Fe(t);return(e.local?Xi:Wi)(e)}function Gi(){}function Sn(t){return t==null?Gi:function(){return this.querySelector(t)}}function Ki(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=new Array(s),a,u,l=0;l<s;++l)(a=i[l])&&(u=t.call(a,a.__data__,l,i))&&("__data__"in a&&(u.__data__=a.__data__),c[l]=u);return new dt(o,this._parents)}function qi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Qi(){return[]}function ko(t){return t==null?Qi:function(){return this.querySelectorAll(t)}}function Ji(t){return function(){return qi(t.apply(this,arguments))}}function ji(t){typeof t=="function"?t=Ji(t):t=ko(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var s=e[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&(o.push(t.call(a,a.__data__,u,s)),r.push(a));return new dt(o,r)}function Io(t){return function(){return this.matches(t)}}function zo(t){return function(e){return e.matches(t)}}var ts=Array.prototype.find;function es(t){return function(){return ts.call(this.children,t)}}function ns(){return this.firstElementChild}function os(t){return this.select(t==null?ns:es(typeof t=="function"?t:zo(t)))}var rs=Array.prototype.filter;function is(){return Array.from(this.children)}function ss(t){return function(){return rs.call(this.children,t)}}function cs(t){return this.selectAll(t==null?is:ss(typeof t=="function"?t:zo(t)))}function as(t){typeof t!="function"&&(t=Io(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new dt(o,this._parents)}function Ro(t){return new Array(t.length)}function ls(){return new dt(this._enter||this._groups.map(Ro),this._parents)}function Ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ie.prototype={constructor:Ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function us(t){return function(){return t}}function ds(t,e,n,o,r,i){for(var s=0,c,a=e.length,u=i.length;s<u;++s)(c=e[s])?(c.__data__=i[s],o[s]=c):n[s]=new Ie(t,i[s]);for(;s<a;++s)(c=e[s])&&(r[s]=c)}function fs(t,e,n,o,r,i,s){var c,a,u=new Map,l=e.length,f=i.length,p=new Array(l),g;for(c=0;c<l;++c)(a=e[c])&&(p[c]=g=s.call(a,a.__data__,c,e)+"",u.has(g)?r[c]=a:u.set(g,a));for(c=0;c<f;++c)g=s.call(t,i[c],c,i)+"",(a=u.get(g))?(o[c]=a,a.__data__=i[c],u.delete(g)):n[c]=new Ie(t,i[c]);for(c=0;c<l;++c)(a=e[c])&&u.get(p[c])===a&&(r[c]=a)}function hs(t){return t.__data__}function ps(t,e){if(!arguments.length)return Array.from(this,hs);var n=e?fs:ds,o=this._parents,r=this._groups;typeof t!="function"&&(t=us(t));for(var i=r.length,s=new Array(i),c=new Array(i),a=new Array(i),u=0;u<i;++u){var l=o[u],f=r[u],p=f.length,g=gs(t.call(l,l&&l.__data__,u,o)),_=g.length,y=c[u]=new Array(_),x=s[u]=new Array(_),m=a[u]=new Array(p);n(l,f,y,x,m,g,e);for(var S=0,N=0,w,A;S<_;++S)if(w=y[S]){for(S>=N&&(N=S+1);!(A=x[N])&&++N<_;);w._next=A||null}}return s=new dt(s,o),s._enter=c,s._exit=a,s}function gs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ms(){return new dt(this._exit||this._groups.map(Ro),this._parents)}function ys(t,e,n){var o=this.enter(),r=this,i=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ws(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,i=o.length,s=Math.min(r,i),c=new Array(r),a=0;a<s;++a)for(var u=n[a],l=o[a],f=u.length,p=c[a]=new Array(f),g,_=0;_<f;++_)(g=u[_]||l[_])&&(p[_]=g);for(;a<r;++a)c[a]=n[a];return new dt(c,this._parents)}function vs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function xs(t){t||(t=_s);function e(f,p){return f&&p?t(f.__data__,p.__data__):!f-!p}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],c=s.length,a=r[i]=new Array(c),u,l=0;l<c;++l)(u=s[l])&&(a[l]=u);a.sort(e)}return new dt(r,this._parents).order()}function _s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Es(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ss(){return Array.from(this)}function bs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function Ns(){let t=0;for(const e of this)++t;return t}function Cs(){return!this.node()}function Ms(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r=e[n],i=0,s=r.length,c;i<s;++i)(c=r[i])&&t.call(c,c.__data__,i,r);return this}function As(t){return function(){this.removeAttribute(t)}}function Ts(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $s(t,e){return function(){this.setAttribute(t,e)}}function ks(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Is(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Rs(t,e){var n=Fe(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?Ts:As:typeof e=="function"?n.local?zs:Is:n.local?ks:$s)(n,e))}function Do(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ds(t){return function(){this.style.removeProperty(t)}}function Hs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ps(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Vs(t,e,n){return arguments.length>1?this.each((e==null?Ds:typeof e=="function"?Ps:Hs)(t,e,n??"")):ee(this.node(),t)}function ee(t,e){return t.style.getPropertyValue(e)||Do(t).getComputedStyle(t,null).getPropertyValue(e)}function Bs(t){return function(){delete this[t]}}function Os(t,e){return function(){this[t]=e}}function Fs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ls(t,e){return arguments.length>1?this.each((e==null?Bs:typeof e=="function"?Fs:Os)(t,e)):this.node()[t]}function Ho(t){return t.trim().split(/^|\s+/)}function bn(t){return t.classList||new Po(t)}function Po(t){this._node=t,this._names=Ho(t.getAttribute("class")||"")}Po.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Vo(t,e){for(var n=bn(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function Bo(t,e){for(var n=bn(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function Ys(t){return function(){Vo(this,t)}}function Zs(t){return function(){Bo(this,t)}}function Us(t,e){return function(){(e.apply(this,arguments)?Vo:Bo)(this,t)}}function Ws(t,e){var n=Ho(t+"");if(arguments.length<2){for(var o=bn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Us:e?Ys:Zs)(n,e))}function Xs(){this.textContent=""}function Gs(t){return function(){this.textContent=t}}function Ks(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qs(t){return arguments.length?this.each(t==null?Xs:(typeof t=="function"?Ks:Gs)(t)):this.node().textContent}function Qs(){this.innerHTML=""}function Js(t){return function(){this.innerHTML=t}}function js(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function tc(t){return arguments.length?this.each(t==null?Qs:(typeof t=="function"?js:Js)(t)):this.node().innerHTML}function ec(){this.nextSibling&&this.parentNode.appendChild(this)}function nc(){return this.each(ec)}function oc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rc(){return this.each(oc)}function ic(t){var e=typeof t=="function"?t:$o(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function sc(){return null}function cc(t,e){var n=typeof t=="function"?t:$o(t),o=e==null?sc:typeof e=="function"?e:Sn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ac(){var t=this.parentNode;t&&t.removeChild(this)}function lc(){return this.each(ac)}function uc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fc(t){return this.select(t?dc:uc)}function hc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pc(t){return function(e){t.call(this,e,this.__data__)}}function gc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function mc(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++o]=i;++o?e.length=o:delete this.__on}}}function yc(t,e,n){return function(){var o=this.__on,r,i=pc(e);if(o){for(var s=0,c=o.length;s<c;++s)if((r=o[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},o?o.push(r):this.__on=[r]}}function wc(t,e,n){var o=gc(t+""),r,i=o.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,u=c.length,l;a<u;++a)for(r=0,l=c[a];r<i;++r)if((s=o[r]).type===l.type&&s.name===l.name)return l.value}return}for(c=e?yc:mc,r=0;r<i;++r)this.each(c(o[r],e,n));return this}function Oo(t,e,n){var o=Do(t),r=o.CustomEvent;typeof r=="function"?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function vc(t,e){return function(){return Oo(this,t,e)}}function xc(t,e){return function(){return Oo(this,t,e.apply(this,arguments))}}function _c(t,e){return this.each((typeof e=="function"?xc:vc)(t,e))}function*Ec(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var Fo=[null];function dt(t,e){this._groups=t,this._parents=e}function xe(){return new dt([[document.documentElement]],Fo)}function Sc(){return this}dt.prototype=xe.prototype={constructor:dt,select:Ki,selectAll:ji,selectChild:os,selectChildren:cs,filter:as,data:ps,enter:ls,exit:ms,join:ys,merge:ws,selection:Sc,order:vs,sort:xs,call:Es,nodes:Ss,node:bs,size:Ns,empty:Cs,each:Ms,attr:Rs,style:Vs,property:Ls,classed:Ws,text:qs,html:tc,raise:nc,lower:rc,append:ic,insert:cc,remove:lc,clone:fc,datum:hc,on:wc,dispatch:_c,[Symbol.iterator]:Ec};function ft(t){return typeof t=="string"?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],Fo)}function bc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pt(t,e){if(t=bc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Nc={passive:!1},ge={capture:!0,passive:!1};function en(t){t.stopImmediatePropagation()}function jt(t){t.preventDefault(),t.stopImmediatePropagation()}function Lo(t){var e=t.document.documentElement,n=ft(t).on("dragstart.drag",jt,ge);"onselectstart"in e?n.on("selectstart.drag",jt,ge):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yo(t,e){var n=t.document.documentElement,o=ft(t).on("dragstart.drag",null);e&&(o.on("click.drag",jt,ge),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ee=t=>()=>t;function dn(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:i,x:s,y:c,dx:a,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}dn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Cc(t){return!t.ctrlKey&&!t.button}function Mc(){return this.parentNode}function Ac(t,e){return e??{x:t.x,y:t.y}}function Tc(){return navigator.maxTouchPoints||"ontouchstart"in this}function $c(){var t=Cc,e=Mc,n=Ac,o=Tc,r={},i=Oe("start","drag","end"),s=0,c,a,u,l,f=0;function p(w){w.on("mousedown.drag",g).filter(o).on("touchstart.drag",x).on("touchmove.drag",m,Nc).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,A){if(!(l||!t.call(this,w,A))){var C=N(this,e.call(this,w,A),w,A,"mouse");C&&(ft(w.view).on("mousemove.drag",_,ge).on("mouseup.drag",y,ge),Lo(w.view),en(w),u=!1,c=w.clientX,a=w.clientY,C("start",w))}}function _(w){if(jt(w),!u){var A=w.clientX-c,C=w.clientY-a;u=A*A+C*C>f}r.mouse("drag",w)}function y(w){ft(w.view).on("mousemove.drag mouseup.drag",null),Yo(w.view,u),jt(w),r.mouse("end",w)}function x(w,A){if(t.call(this,w,A)){var C=w.changedTouches,z=e.call(this,w,A),H=C.length,$,V;for($=0;$<H;++$)(V=N(this,z,w,A,C[$].identifier,C[$]))&&(en(w),V("start",w,C[$]))}}function m(w){var A=w.changedTouches,C=A.length,z,H;for(z=0;z<C;++z)(H=r[A[z].identifier])&&(jt(w),H("drag",w,A[z]))}function S(w){var A=w.changedTouches,C=A.length,z,H;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),z=0;z<C;++z)(H=r[A[z].identifier])&&(en(w),H("end",w,A[z]))}function N(w,A,C,z,H,$){var V=i.copy(),P=pt($||C,A),B,D,h;if((h=n.call(w,new dn("beforestart",{sourceEvent:C,target:p,identifier:H,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:V}),z))!=null)return B=h.x-P[0]||0,D=h.y-P[1]||0,function b(v,M,I){var E=P,T;switch(v){case"start":r[H]=b,T=s++;break;case"end":delete r[H],--s;case"drag":P=pt(I||M,A),T=s;break}V.call(v,w,new dn(v,{sourceEvent:M,subject:h,target:p,identifier:H,active:T,x:P[0]+B,y:P[1]+D,dx:P[0]-E[0],dy:P[1]-E[1],dispatch:V}),z)}}return p.filter=function(w){return arguments.length?(t=typeof w=="function"?w:Ee(!!w),p):t},p.container=function(w){return arguments.length?(e=typeof w=="function"?w:Ee(w),p):e},p.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Ee(w),p):n},p.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Ee(!!w),p):o},p.on=function(){var w=i.on.apply(i,arguments);return w===i?p:w},p.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,p):Math.sqrt(f)},p}var ne=0,fe=0,ce=0,Zo=1e3,ze,he,Re=0,Ot=0,Le=0,me=typeof performance=="object"&&performance.now?performance:Date,Uo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Nn(){return Ot||(Uo(kc),Ot=me.now()+Le)}function kc(){Ot=0}function De(){this._call=this._time=this._next=null}De.prototype=Wo.prototype={constructor:De,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Nn():+n)+(e==null?0:+e),!this._next&&he!==this&&(he?he._next=this:ze=this,he=this),this._call=t,this._time=n,fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,fn())}};function Wo(t,e,n){var o=new De;return o.restart(t,e,n),o}function Ic(){Nn(),++ne;for(var t=ze,e;t;)(e=Ot-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ne}function jn(){Ot=(Re=me.now())+Le,ne=fe=0;try{Ic()}finally{ne=0,Rc(),Ot=0}}function zc(){var t=me.now(),e=t-Re;e>Zo&&(Le-=e,Re=t)}function Rc(){for(var t,e=ze,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ze=n);he=t,fn(o)}function fn(t){if(!ne){fe&&(fe=clearTimeout(fe));var e=t-Ot;e>24?(t<1/0&&(fe=setTimeout(jn,t-me.now()-Le)),ce&&(ce=clearInterval(ce))):(ce||(Re=me.now(),ce=setInterval(zc,Zo)),ne=1,Uo(jn))}}function to(t,e,n){var o=new De;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var Dc=Oe("start","end","cancel","interrupt"),Hc=[],Xo=0,eo=1,hn=2,Te=3,no=4,pn=5,$e=6;function Ye(t,e,n,o,r,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Pc(t,n,{name:e,index:o,group:r,on:Dc,tween:Hc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Xo})}function Cn(t,e){var n=mt(t,e);if(n.state>Xo)throw new Error("too late; already scheduled");return n}function vt(t,e){var n=mt(t,e);if(n.state>Te)throw new Error("too late; already running");return n}function mt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pc(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=Wo(i,0,n.time);function i(u){n.state=eo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,f,p,g;if(n.state!==eo)return a();for(l in o)if(g=o[l],g.name===n.name){if(g.state===Te)return to(s);g.state===no?(g.state=$e,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete o[l]):+l<e&&(g.state=$e,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete o[l])}if(to(function(){n.state===Te&&(n.state=no,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=hn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===hn){for(n.state=Te,r=new Array(p=n.tween.length),l=0,f=-1;l<p;++l)(g=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function c(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=pn,1),f=-1,p=r.length;++f<p;)r[f].call(t,l);n.state===pn&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=$e,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function ke(t,e){var n=t.__transition,o,r,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((o=n[s]).name!==e){i=!1;continue}r=o.state>hn&&o.state<pn,o.state=$e,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[s]}i&&delete t.__transition}}function Vc(t){return this.each(function(){ke(this,t)})}function Bc(t,e){var n,o;return function(){var r=vt(this,t),i=r.tween;if(i!==n){o=n=i;for(var s=0,c=o.length;s<c;++s)if(o[s].name===e){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Oc(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=vt(this,t),s=i.tween;if(s!==o){r=(o=s).slice();for(var c={name:e,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===e){r[a]=c;break}a===u&&r.push(c)}i.tween=r}}function Fc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=mt(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===t)return s.value;return null}return this.each((e==null?Bc:Oc)(n,t,e))}function Mn(t,e,n){var o=t._id;return t.each(function(){var r=vt(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return mt(r,o).value[e]}}function Go(t,e){var n;return(typeof e=="number"?Mi:e instanceof Zn?Yn:(n=Zn(e))?(e=n,Yn):Ai)(t,e)}function Lc(t){return function(){this.removeAttribute(t)}}function Yc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zc(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttribute(t);return s===r?null:s===o?i:i=e(o=s,n)}}function Uc(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===o?i:i=e(o=s,n)}}function Wc(t,e,n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c)))}}function Xc(t,e,n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c)))}}function Gc(t,e){var n=Fe(t),o=n==="transform"?Ti:Go;return this.attrTween(t,typeof e=="function"?(n.local?Xc:Wc)(n,o,Mn(this,"attr."+t,e)):e==null?(n.local?Yc:Lc)(n):(n.local?Uc:Zc)(n,o,e))}function Kc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function qc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qc(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&qc(t,i)),n}return r._value=e,r}function Jc(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Kc(t,i)),n}return r._value=e,r}function jc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=Fe(t);return this.tween(n,(o.local?Qc:Jc)(o,e))}function ta(t,e){return function(){Cn(this,t).delay=+e.apply(this,arguments)}}function ea(t,e){return e=+e,function(){Cn(this,t).delay=e}}function na(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ta:ea)(e,t)):mt(this.node(),e).delay}function oa(t,e){return function(){vt(this,t).duration=+e.apply(this,arguments)}}function ra(t,e){return e=+e,function(){vt(this,t).duration=e}}function ia(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oa:ra)(e,t)):mt(this.node(),e).duration}function sa(t,e){if(typeof e!="function")throw new Error;return function(){vt(this,t).ease=e}}function ca(t){var e=this._id;return arguments.length?this.each(sa(e,t)):mt(this.node(),e).ease}function aa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;vt(this,t).ease=n}}function la(t){if(typeof t!="function")throw new Error;return this.each(aa(this._id,t))}function ua(t){typeof t!="function"&&(t=Io(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new Nt(o,this._parents,this._name,this._id)}function da(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),s=new Array(o),c=0;c<i;++c)for(var a=e[c],u=n[c],l=a.length,f=s[c]=new Array(l),p,g=0;g<l;++g)(p=a[g]||u[g])&&(f[g]=p);for(;c<o;++c)s[c]=e[c];return new Nt(s,this._parents,this._name,this._id)}function fa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ha(t,e,n){var o,r,i=fa(e)?Cn:vt;return function(){var s=i(this,t),c=s.on;c!==o&&(r=(o=c).copy()).on(e,n),s.on=r}}function pa(t,e){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(t):this.each(ha(n,t,e))}function ga(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ma(){return this.on("end.remove",ga(this._id))}function ya(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sn(t));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var c=o[s],a=c.length,u=i[s]=new Array(a),l,f,p=0;p<a;++p)(l=c[p])&&(f=t.call(l,l.__data__,p,c))&&("__data__"in l&&(f.__data__=l.__data__),u[p]=f,Ye(u[p],e,n,p,u,mt(l,n)));return new Nt(i,this._parents,e,n)}function wa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ko(t));for(var o=this._groups,r=o.length,i=[],s=[],c=0;c<r;++c)for(var a=o[c],u=a.length,l,f=0;f<u;++f)if(l=a[f]){for(var p=t.call(l,l.__data__,f,a),g,_=mt(l,n),y=0,x=p.length;y<x;++y)(g=p[y])&&Ye(g,e,n,y,p,_);i.push(p),s.push(l)}return new Nt(i,s,e,n)}var va=xe.prototype.constructor;function xa(){return new va(this._groups,this._parents)}function _a(t,e){var n,o,r;return function(){var i=ee(this,t),s=(this.style.removeProperty(t),ee(this,t));return i===s?null:i===n&&s===o?r:r=e(n=i,o=s)}}function Ko(t){return function(){this.style.removeProperty(t)}}function Ea(t,e,n){var o,r=n+"",i;return function(){var s=ee(this,t);return s===r?null:s===o?i:i=e(o=s,n)}}function Sa(t,e,n){var o,r,i;return function(){var s=ee(this,t),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),ee(this,t))),s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c))}}function ba(t,e){var n,o,r,i="style."+e,s="end."+i,c;return function(){var a=vt(this,t),u=a.on,l=a.value[i]==null?c||(c=Ko(e)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(s,r=l),a.on=o}}function Na(t,e,n){var o=(t+="")=="transform"?$i:Go;return e==null?this.styleTween(t,_a(t,o)).on("end.style."+t,Ko(t)):typeof e=="function"?this.styleTween(t,Sa(t,o,Mn(this,"style."+t,e))).each(ba(this._id,t)):this.styleTween(t,Ea(t,o,e),n).on("end.style."+t,null)}function Ca(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function Ma(t,e,n){var o,r;function i(){var s=e.apply(this,arguments);return s!==r&&(o=(r=s)&&Ca(t,s,n)),o}return i._value=e,i}function Aa(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,Ma(t,e,n??""))}function Ta(t){return function(){this.textContent=t}}function $a(t){return function(){var e=t(this);this.textContent=e??""}}function ka(t){return this.tween("text",typeof t=="function"?$a(Mn(this,"text",t)):Ta(t==null?"":t+""))}function Ia(t){return function(e){this.textContent=t.call(this,e)}}function za(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ia(r)),e}return o._value=t,o}function Ra(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,za(t))}function Da(){for(var t=this._name,e=this._id,n=qo(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],c=s.length,a,u=0;u<c;++u)if(a=s[u]){var l=mt(a,e);Ye(a,t,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Nt(o,this._parents,t,n)}function Ha(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var c={value:s},a={value:function(){--r===0&&i()}};n.each(function(){var u=vt(this,o),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(a)),u.on=e}),r===0&&i()})}var Pa=0;function Nt(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function qo(){return++Pa}var Et=xe.prototype;Nt.prototype={constructor:Nt,select:ya,selectAll:wa,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:ua,merge:da,selection:xa,transition:Da,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:pa,attr:Gc,attrTween:jc,style:Na,styleTween:Aa,text:ka,textTween:Ra,remove:ma,tween:Fc,delay:na,duration:ia,ease:ca,easeVarying:la,end:Ha,[Symbol.iterator]:Et[Symbol.iterator]};function Va(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ba={time:null,delay:0,duration:250,ease:Va};function Oa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Fa(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=qo(),(n=Ba).time=Nn(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&Ye(a,t,e,u,s,n||Oa(a,e));return new Nt(o,this._parents,t,e)}xe.prototype.interrupt=Vc;xe.prototype.transition=Fa;const Se=t=>()=>t;function La(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function St(t,e,n){this.k=t,this.x=e,this.y=n}St.prototype={constructor:St,scale:function(t){return t===1?this:new St(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new St(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bt=new St(1,0,0);St.prototype;function nn(t){t.stopImmediatePropagation()}function ae(t){t.preventDefault(),t.stopImmediatePropagation()}function Ya(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Za(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function oo(){return this.__zoom||bt}function Ua(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Wa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xa(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Qo(){var t=Ya,e=Za,n=Xa,o=Ua,r=Wa,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=ki,u=Oe("start","zoom","end"),l,f,p,g=500,_=150,y=0,x=10;function m(h){h.property("__zoom",oo).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",V).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,b,v,M){var I=h.selection?h.selection():h;I.property("__zoom",oo),h!==I?A(h,b,v,M):I.interrupt().each(function(){C(this,arguments).event(M).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},m.scaleBy=function(h,b,v,M){m.scaleTo(h,function(){var I=this.__zoom.k,E=typeof b=="function"?b.apply(this,arguments):b;return I*E},v,M)},m.scaleTo=function(h,b,v,M){m.transform(h,function(){var I=e.apply(this,arguments),E=this.__zoom,T=v==null?w(I):typeof v=="function"?v.apply(this,arguments):v,k=E.invert(T),R=typeof b=="function"?b.apply(this,arguments):b;return n(N(S(E,R),T,k),I,s)},v,M)},m.translateBy=function(h,b,v,M){m.transform(h,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof v=="function"?v.apply(this,arguments):v),e.apply(this,arguments),s)},null,M)},m.translateTo=function(h,b,v,M,I){m.transform(h,function(){var E=e.apply(this,arguments),T=this.__zoom,k=M==null?w(E):typeof M=="function"?M.apply(this,arguments):M;return n(bt.translate(k[0],k[1]).scale(T.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof v=="function"?-v.apply(this,arguments):-v),E,s)},M,I)};function S(h,b){return b=Math.max(i[0],Math.min(i[1],b)),b===h.k?h:new St(b,h.x,h.y)}function N(h,b,v){var M=b[0]-v[0]*h.k,I=b[1]-v[1]*h.k;return M===h.x&&I===h.y?h:new St(h.k,M,I)}function w(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function A(h,b,v,M){h.on("start.zoom",function(){C(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(M).end()}).tween("zoom",function(){var I=this,E=arguments,T=C(I,E).event(M),k=e.apply(I,E),R=v==null?w(k):typeof v=="function"?v.apply(I,E):v,F=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),O=I.__zoom,Z=typeof b=="function"?b.apply(I,E):b,U=a(O.invert(R).concat(F/O.k),Z.invert(R).concat(F/Z.k));return function(X){if(X===1)X=Z;else{var q=U(X),K=F/q[2];X=new St(K,R[0]-q[0]*K,R[1]-q[1]*K)}T.zoom(null,X)}})}function C(h,b,v){return!v&&h.__zooming||new z(h,b)}function z(h,b){this.that=h,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,b),this.taps=0}z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,b){return this.mouse&&h!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var b=ft(this.that).datum();u.call(h,this.that,new La(h,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),b)}};function H(h,...b){if(!t.apply(this,arguments))return;var v=C(this,b).event(h),M=this.__zoom,I=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),E=pt(h);if(v.wheel)(v.mouse[0][0]!==E[0]||v.mouse[0][1]!==E[1])&&(v.mouse[1]=M.invert(v.mouse[0]=E)),clearTimeout(v.wheel);else{if(M.k===I)return;v.mouse=[E,M.invert(E)],ke(this),v.start()}ae(h),v.wheel=setTimeout(T,_),v.zoom("mouse",n(N(S(M,I),v.mouse[0],v.mouse[1]),v.extent,s));function T(){v.wheel=null,v.end()}}function $(h,...b){if(p||!t.apply(this,arguments))return;var v=h.currentTarget,M=C(this,b,!0).event(h),I=ft(h.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",F,!0),E=pt(h,v),T=h.clientX,k=h.clientY;Lo(h.view),nn(h),M.mouse=[E,this.__zoom.invert(E)],ke(this),M.start();function R(O){if(ae(O),!M.moved){var Z=O.clientX-T,U=O.clientY-k;M.moved=Z*Z+U*U>y}M.event(O).zoom("mouse",n(N(M.that.__zoom,M.mouse[0]=pt(O,v),M.mouse[1]),M.extent,s))}function F(O){I.on("mousemove.zoom mouseup.zoom",null),Yo(O.view,M.moved),ae(O),M.event(O).end()}}function V(h,...b){if(t.apply(this,arguments)){var v=this.__zoom,M=pt(h.changedTouches?h.changedTouches[0]:h,this),I=v.invert(M),E=v.k*(h.shiftKey?.5:2),T=n(N(S(v,E),M,I),e.apply(this,b),s);ae(h),c>0?ft(this).transition().duration(c).call(A,T,M,h):ft(this).call(m.transform,T,M,h)}}function P(h,...b){if(t.apply(this,arguments)){var v=h.touches,M=v.length,I=C(this,b,h.changedTouches.length===M).event(h),E,T,k,R;for(nn(h),T=0;T<M;++T)k=v[T],R=pt(k,this),R=[R,this.__zoom.invert(R),k.identifier],I.touch0?!I.touch1&&I.touch0[2]!==R[2]&&(I.touch1=R,I.taps=0):(I.touch0=R,E=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),E&&(I.taps<2&&(f=R[0],l=setTimeout(function(){l=null},g)),ke(this),I.start())}}function B(h,...b){if(this.__zooming){var v=C(this,b).event(h),M=h.changedTouches,I=M.length,E,T,k,R;for(ae(h),E=0;E<I;++E)T=M[E],k=pt(T,this),v.touch0&&v.touch0[2]===T.identifier?v.touch0[0]=k:v.touch1&&v.touch1[2]===T.identifier&&(v.touch1[0]=k);if(T=v.that.__zoom,v.touch1){var F=v.touch0[0],O=v.touch0[1],Z=v.touch1[0],U=v.touch1[1],X=(X=Z[0]-F[0])*X+(X=Z[1]-F[1])*X,q=(q=U[0]-O[0])*q+(q=U[1]-O[1])*q;T=S(T,Math.sqrt(X/q)),k=[(F[0]+Z[0])/2,(F[1]+Z[1])/2],R=[(O[0]+U[0])/2,(O[1]+U[1])/2]}else if(v.touch0)k=v.touch0[0],R=v.touch0[1];else return;v.zoom("touch",n(N(T,k,R),v.extent,s))}}function D(h,...b){if(this.__zooming){var v=C(this,b).event(h),M=h.changedTouches,I=M.length,E,T;for(nn(h),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),E=0;E<I;++E)T=M[E],v.touch0&&v.touch0[2]===T.identifier?delete v.touch0:v.touch1&&v.touch1[2]===T.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(T=pt(T,this),Math.hypot(f[0]-T[0],f[1]-T[1])<x)){var k=ft(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Se(+h),m):o},m.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Se(!!h),m):t},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Se(!!h),m):r},m.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Se([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):e},m.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],m):[i[0],i[1]]},m.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(h){return arguments.length?(n=h,m):n},m.duration=function(h){return arguments.length?(c=+h,m):c},m.interpolate=function(h){return arguments.length?(a=h,m):a},m.on=function(){var h=u.on.apply(u,arguments);return h===u?m:h},m.clickDistance=function(h){return arguments.length?(y=(h=+h)*h,m):Math.sqrt(y)},m.tapDistance=function(h){return arguments.length?(x=+h,m):x},m}const Ze=d.createContext(null),Ga=Ze.Provider,Ct={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Jo=Ct.error001();function J(t,e){const n=d.useContext(Ze);if(n===null)throw new Error(Jo);return To(n,t,e)}const nt=()=>{const t=d.useContext(Ze);if(t===null)throw new Error(Jo);return d.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Ka=t=>t.userSelectionActive?"none":"all";function An({position:t,children:e,className:n,style:o,...r}){const i=J(Ka),s=`${t}`.split("-");return d.createElement("div",{className:it(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},e)}function qa({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.createElement(An,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},d.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Qa=({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:u,...l})=>{const f=d.useRef(null),[p,g]=d.useState({x:0,y:0,width:0,height:0}),_=it(["react-flow__edge-textwrapper",u]);return d.useEffect(()=>{if(f.current){const y=f.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:d.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:_,visibility:p.width?"visible":"hidden",...l},r&&d.createElement("rect",{width:p.width+2*s[0],x:-s[0],y:-s[1],height:p.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),d.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:o},n),a)};var Ja=d.memo(Qa);const Tn=t=>({width:t.offsetWidth,height:t.offsetHeight}),oe=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),$n=(t={x:0,y:0},e)=>({x:oe(t.x,e[0][0],e[1][0]),y:oe(t.y,e[0][1],e[1][1])}),ro=(t,e,n)=>t<e?oe(Math.abs(t-e),1,50)/50:t>n?-oe(Math.abs(t-n),1,50)/50:0,jo=(t,e)=>{const n=ro(t.x,35,e.width-35)*20,o=ro(t.y,35,e.height-35)*20;return[n,o]},tr=t=>t.getRootNode?.()||window?.document,er=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ye=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),nr=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),io=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),ja=(t,e)=>nr(er(ye(t),ye(e))),gn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},tl=t=>ht(t.width)&&ht(t.height)&&ht(t.x)&&ht(t.y),ht=t=>!isNaN(t)&&isFinite(t),j=Symbol.for("internals"),or=["Enter"," ","Escape"],el=(t,e)=>{},nl=t=>"nativeEvent"in t;function mn(t){const n=(nl(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const rr=t=>"clientX"in t,$t=(t,e)=>{const n=rr(t),o=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:o-(e?.left??0),y:r-(e?.top??0)}},He=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,_e=({id:t,path:e,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:g=20})=>d.createElement(d.Fragment,null,d.createElement("path",{id:t,style:l,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g&&d.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),r&&ht(n)&&ht(o)?d.createElement(Ja,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u}):null);_e.displayName="BaseEdge";function le(t,e,n){return n===void 0?n:o=>{const r=e().edges.find(i=>i.id===t);r&&n(o,{...r})}}function ir({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,i=n<t?n+r:n-r,s=Math.abs(o-e)/2,c=o<e?o+s:o-s;return[i,c,r,s]}function sr({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=t*.125+r*.375+s*.375+n*.125,u=e*.125+i*.375+c*.375+o*.125,l=Math.abs(a-t),f=Math.abs(u-e);return[a,u,l,f]}var Ft;(function(t){t.Strict="strict",t.Loose="loose"})(Ft||(Ft={}));var Vt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Vt||(Vt={}));var we;(function(t){t.Partial="partial",t.Full="full"})(we||(we={}));var Tt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Tt||(Tt={}));var Pe;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Pe||(Pe={}));var Y;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Y||(Y={}));function so({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===Y.Left||t===Y.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function cr({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:i=Y.Top}){const[s,c]=so({pos:n,x1:t,y1:e,x2:o,y2:r}),[a,u]=so({pos:i,x1:o,y1:r,x2:t,y2:e}),[l,f,p,g]=sr({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:u});return[`M${t},${e} C${s},${c} ${a},${u} ${o},${r}`,l,f,p,g]}const kn=d.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:_,interactionWidth:y})=>{const[x,m,S]=cr({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return d.createElement(_e,{path:x,labelX:m,labelY:S,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:_,interactionWidth:y})});kn.displayName="SimpleBezierEdge";const co={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},ol=({source:t,sourcePosition:e=Y.Bottom,target:n})=>e===Y.Left||e===Y.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ao=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function rl({source:t,sourcePosition:e=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:i}){const s=co[e],c=co[o],a={x:t.x+s.x*i,y:t.y+s.y*i},u={x:n.x+c.x*i,y:n.y+c.y*i},l=ol({source:a,sourcePosition:e,target:u}),f=l.x!==0?"x":"y",p=l[f];let g=[],_,y;const x={x:0,y:0},m={x:0,y:0},[S,N,w,A]=ir({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[f]*c[f]===-1){_=r.x??S,y=r.y??N;const z=[{x:_,y:a.y},{x:_,y:u.y}],H=[{x:a.x,y},{x:u.x,y}];s[f]===p?g=f==="x"?z:H:g=f==="x"?H:z}else{const z=[{x:a.x,y:u.y}],H=[{x:u.x,y:a.y}];if(f==="x"?g=s.x===p?H:z:g=s.y===p?z:H,e===o){const D=Math.abs(t[f]-n[f]);if(D<=i){const h=Math.min(i-1,i-D);s[f]===p?x[f]=(a[f]>t[f]?-1:1)*h:m[f]=(u[f]>n[f]?-1:1)*h}}if(e!==o){const D=f==="x"?"y":"x",h=s[f]===c[D],b=a[D]>u[D],v=a[D]<u[D];(s[f]===1&&(!h&&b||h&&v)||s[f]!==1&&(!h&&v||h&&b))&&(g=f==="x"?z:H)}const $={x:a.x+x.x,y:a.y+x.y},V={x:u.x+m.x,y:u.y+m.y},P=Math.max(Math.abs($.x-g[0].x),Math.abs(V.x-g[0].x)),B=Math.max(Math.abs($.y-g[0].y),Math.abs(V.y-g[0].y));P>=B?(_=($.x+V.x)/2,y=g[0].y):(_=g[0].x,y=($.y+V.y)/2)}return[[t,{x:a.x+x.x,y:a.y+x.y},...g,{x:u.x+m.x,y:u.y+m.y},n],_,y,w,A]}function il(t,e,n,o){const r=Math.min(ao(t,e)/2,ao(e,n)/2,o),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,l=t.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*l}`}const c=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${i},${s+r*a}Q ${i},${s} ${i+r*c},${s}`}function yn({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:i=Y.Top,borderRadius:s=5,centerX:c,centerY:a,offset:u=20}){const[l,f,p,g,_]=rl({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:c,y:a},offset:u});return[l.reduce((x,m,S)=>{let N="";return S>0&&S<l.length-1?N=il(l[S-1],m,l[S+1],s):N=`${S===0?"M":"L"}${m.x} ${m.y}`,x+=N,x},""),f,p,g,_]}const Ue=d.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,sourcePosition:f=Y.Bottom,targetPosition:p=Y.Top,markerEnd:g,markerStart:_,pathOptions:y,interactionWidth:x})=>{const[m,S,N]=yn({sourceX:t,sourceY:e,sourcePosition:f,targetX:n,targetY:o,targetPosition:p,borderRadius:y?.borderRadius,offset:y?.offset});return d.createElement(_e,{path:m,labelX:S,labelY:N,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:g,markerStart:_,interactionWidth:x})});Ue.displayName="SmoothStepEdge";const In=d.memo(t=>d.createElement(Ue,{...t,pathOptions:d.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));In.displayName="StepEdge";function sl({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,i,s,c]=ir({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,i,s,c]}const zn=d.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:g})=>{const[_,y,x]=sl({sourceX:t,sourceY:e,targetX:n,targetY:o});return d.createElement(_e,{path:_,labelX:y,labelY:x,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:c,labelBgPadding:a,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:p,interactionWidth:g})});zn.displayName="StraightEdge";function be(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function lo({pos:t,x1:e,y1:n,x2:o,y2:r,c:i}){switch(t){case Y.Left:return[e-be(e-o,i),n];case Y.Right:return[e+be(o-e,i),n];case Y.Top:return[e,n-be(n-r,i)];case Y.Bottom:return[e,n+be(r-n,i)]}}function ar({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:i=Y.Top,curvature:s=.25}){const[c,a]=lo({pos:n,x1:t,y1:e,x2:o,y2:r,c:s}),[u,l]=lo({pos:i,x1:o,y1:r,x2:t,y2:e,c:s}),[f,p,g,_]=sr({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:c,sourceControlY:a,targetControlX:u,targetControlY:l});return[`M${t},${e} C${c},${a} ${u},${l} ${o},${r}`,f,p,g,_]}const Ve=d.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:_,pathOptions:y,interactionWidth:x})=>{const[m,S,N]=ar({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:y?.curvature});return d.createElement(_e,{path:m,labelX:S,labelY:N,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:_,interactionWidth:x})});Ve.displayName="BezierEdge";const Rn=d.createContext(null),cl=Rn.Provider;Rn.Consumer;const al=()=>d.useContext(Rn),ll=t=>"id"in t&&"source"in t&&"target"in t,ul=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`reactflow__edge-${t}${e||""}-${n}${o||""}`,wn=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,dl=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),fl=(t,e)=>{if(!t.source||!t.target)return e;let n;return ll(t)?n={...t}:n={...t,id:ul(t)},dl(n,e)?e:e.concat(n)},vn=({x:t,y:e},[n,o,r],i,[s,c])=>{const a={x:(t-n)/r,y:(e-o)/r};return i?{x:s*Math.round(a.x/s),y:c*Math.round(a.y/c)}:a},lr=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),Bt=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],o=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},We=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:i,y:s}=Bt(r,e).positionAbsolute;return er(o,ye({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nr(n)},ur=(t,e,[n,o,r]=[0,0,1],i=!1,s=!1,c=[0,0])=>{const a={x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r},u=[];return t.forEach(l=>{const{width:f,height:p,selectable:g=!0,hidden:_=!1}=l;if(s&&!g||_)return!1;const{positionAbsolute:y}=Bt(l,c),x={x:y.x,y:y.y,width:f||0,height:p||0},m=gn(a,x),S=typeof f>"u"||typeof p>"u"||f===null||p===null,N=i&&m>0,w=(f||0)*(p||0);(S||N||m>=w||l.dragging)&&u.push(l)}),u},dr=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},fr=(t,e,n,o,r,i=.1)=>{const s=e/(t.width*(1+i)),c=n/(t.height*(1+i)),a=Math.min(s,c),u=oe(a,o,r),l=t.x+t.width/2,f=t.y+t.height/2,p=e/2-l*u,g=n/2-f*u;return{x:p,y:g,zoom:u}},Pt=(t,e=0)=>t.transition().duration(e);function uo(t,e,n,o){return(e[n]||[]).reduce((r,i)=>(`${t.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+i.x+i.width/2,y:(t.positionAbsolute?.y??0)+i.y+i.height/2}),r),[])}function hl(t,e,n,o,r,i){const{x:s,y:c}=$t(t),u=e.elementsFromPoint(s,c).find(_=>_.classList.contains("react-flow__handle"));if(u){const _=u.getAttribute("data-nodeid");if(_){const y=Dn(void 0,u),x=u.getAttribute("data-handleid"),m=i({nodeId:_,id:x,type:y});if(m){const S=r.find(N=>N.nodeId===_&&N.type===y&&N.id===x);return{handle:{id:x,type:y,nodeId:_,x:S?.x||n.x,y:S?.y||n.y},validHandleResult:m}}}}let l=[],f=1/0;if(r.forEach(_=>{const y=Math.sqrt((_.x-n.x)**2+(_.y-n.y)**2);if(y<=o){const x=i(_);y<=f&&(y<f?l=[{handle:_,validHandleResult:x}]:y===f&&l.push({handle:_,validHandleResult:x}),f=y)}}),!l.length)return{handle:null,validHandleResult:hr()};if(l.length===1)return l[0];const p=l.some(({validHandleResult:_})=>_.isValid),g=l.some(({handle:_})=>_.type==="target");return l.find(({handle:_,validHandleResult:y})=>g?_.type==="target":p?y.isValid:!0)||l[0]}const pl={source:null,target:null,sourceHandle:null,targetHandle:null},hr=()=>({handleDomNode:null,isValid:!1,connection:pl,endHandle:null});function pr(t,e,n,o,r,i,s){const c=r==="target",a=s.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),u={...hr(),handleDomNode:a};if(a){const l=Dn(void 0,a),f=a.getAttribute("data-nodeid"),p=a.getAttribute("data-handleid"),g=a.classList.contains("connectable"),_=a.classList.contains("connectableend"),y={source:c?f:n,sourceHandle:c?p:o,target:c?n:f,targetHandle:c?o:p};u.connection=y,g&&_&&(e===Ft.Strict?c&&l==="source"||!c&&l==="target":f!==n||p!==o)&&(u.endHandle={nodeId:f,handleId:p,type:l},u.isValid=i(y))}return u}function gl({nodes:t,nodeId:e,handleId:n,handleType:o}){return t.reduce((r,i)=>{if(i[j]){const{handleBounds:s}=i[j];let c=[],a=[];s&&(c=uo(i,s,"source",`${e}-${n}-${o}`),a=uo(i,s,"target",`${e}-${n}-${o}`)),r.push(...c,...a)}return r},[])}function Dn(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function on(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ml(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function gr({event:t,handleId:e,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:c,edgeUpdaterType:a,onReconnectEnd:u}){const l=tr(t.target),{connectionMode:f,domNode:p,autoPanOnConnect:g,connectionRadius:_,onConnectStart:y,panBy:x,getNodes:m,cancelConnection:S}=i();let N=0,w;const{x:A,y:C}=$t(t),z=l?.elementFromPoint(A,C),H=Dn(a,z),$=p?.getBoundingClientRect();if(!$||!H)return;let V,P=$t(t,$),B=!1,D=null,h=!1,b=null;const v=gl({nodes:m(),nodeId:n,handleId:e,handleType:H}),M=()=>{if(!g)return;const[T,k]=jo(P,$);x({x:T,y:k}),N=requestAnimationFrame(M)};s({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:H,connectionStartHandle:{nodeId:n,handleId:e,type:H},connectionEndHandle:null}),y?.(t,{nodeId:n,handleId:e,handleType:H});function I(T){const{transform:k}=i();P=$t(T,$);const{handle:R,validHandleResult:F}=hl(T,l,vn(P,k,!1,[1,1]),_,v,O=>pr(O,f,n,e,r?"target":"source",c,l));if(w=R,B||(M(),B=!0),b=F.handleDomNode,D=F.connection,h=F.isValid,s({connectionPosition:w&&h?lr({x:w.x,y:w.y},k):P,connectionStatus:ml(!!w,h),connectionEndHandle:F.endHandle}),!w&&!h&&!b)return on(V);D.source!==D.target&&b&&(on(V),V=b,b.classList.add("connecting","react-flow__handle-connecting"),b.classList.toggle("valid",h),b.classList.toggle("react-flow__handle-valid",h))}function E(T){(w||b)&&D&&h&&o?.(D),i().onConnectEnd?.(T),a&&u?.(T),on(V),S(),cancelAnimationFrame(N),B=!1,h=!1,D=null,b=null,l.removeEventListener("mousemove",I),l.removeEventListener("mouseup",E),l.removeEventListener("touchmove",I),l.removeEventListener("touchend",E)}l.addEventListener("mousemove",I),l.addEventListener("mouseup",E),l.addEventListener("touchmove",I),l.addEventListener("touchend",E)}const fo=()=>!0,yl=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),wl=(t,e,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:r?.nodeId===t&&r?.handleId===e&&r?.type===n||i?.nodeId===t&&i?.handleId===e&&i?.type===n,clickConnecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n}},mr=d.forwardRef(({type:t="source",position:e=Y.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:u,onMouseDown:l,onTouchStart:f,...p},g)=>{const _=s||null,y=t==="target",x=nt(),m=al(),{connectOnClick:S,noPanClassName:N}=J(yl,ot),{connecting:w,clickConnecting:A}=J(wl(m,_,t),ot);m||x.getState().onError?.("010",Ct.error010());const C=$=>{const{defaultEdgeOptions:V,onConnect:P,hasDefaultEdges:B}=x.getState(),D={...V,...$};if(B){const{edges:h,setEdges:b}=x.getState();b(fl(D,h))}P?.(D),c?.(D)},z=$=>{if(!m)return;const V=rr($);r&&(V&&$.button===0||!V)&&gr({event:$,handleId:_,nodeId:m,onConnect:C,isTarget:y,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||fo}),V?l?.($):f?.($)},H=$=>{const{onClickConnectStart:V,onClickConnectEnd:P,connectionClickStartHandle:B,connectionMode:D,isValidConnection:h}=x.getState();if(!m||!B&&!r)return;if(!B){V?.($,{nodeId:m,handleId:_,handleType:t}),x.setState({connectionClickStartHandle:{nodeId:m,type:t,handleId:_}});return}const b=tr($.target),v=n||h||fo,{connection:M,isValid:I}=pr({nodeId:m,id:_,type:t},D,B.nodeId,B.handleId||null,B.type,v,b);I&&C(M),P?.($),x.setState({connectionClickStartHandle:null})};return d.createElement("div",{"data-handleid":_,"data-nodeid":m,"data-handlepos":e,"data-id":`${m}-${_}-${t}`,className:it(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",N,u,{source:!y,target:y,connectable:o,connectablestart:r,connectableend:i,connecting:A,connectionindicator:o&&(r&&!w||i&&w)}]),onMouseDown:z,onTouchStart:z,onClick:S?H:void 0,ref:g,...p},a)});mr.displayName="Handle";var Be=d.memo(mr);const yr=({data:t,isConnectable:e,targetPosition:n=Y.Top,sourcePosition:o=Y.Bottom})=>d.createElement(d.Fragment,null,d.createElement(Be,{type:"target",position:n,isConnectable:e}),t?.label,d.createElement(Be,{type:"source",position:o,isConnectable:e}));yr.displayName="DefaultNode";var xn=d.memo(yr);const wr=({data:t,isConnectable:e,sourcePosition:n=Y.Bottom})=>d.createElement(d.Fragment,null,t?.label,d.createElement(Be,{type:"source",position:n,isConnectable:e}));wr.displayName="InputNode";var vr=d.memo(wr);const xr=({data:t,isConnectable:e,targetPosition:n=Y.Top})=>d.createElement(d.Fragment,null,d.createElement(Be,{type:"target",position:n,isConnectable:e}),t?.label);xr.displayName="OutputNode";var _r=d.memo(xr);const Hn=()=>null;Hn.displayName="GroupNode";const vl=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ne=t=>t.id;function xl(t,e){return ot(t.selectedNodes.map(Ne),e.selectedNodes.map(Ne))&&ot(t.selectedEdges.map(Ne),e.selectedEdges.map(Ne))}const Er=d.memo(({onSelectionChange:t})=>{const e=nt(),{selectedNodes:n,selectedEdges:o}=J(vl,xl);return d.useEffect(()=>{const r={nodes:n,edges:o};t?.(r),e.getState().onSelectionChange.forEach(i=>i(r))},[n,o,t]),null});Er.displayName="SelectionListener";const _l=t=>!!t.onSelectionChange;function El({onSelectionChange:t}){const e=J(_l);return t||e?d.createElement(Er,{onSelectionChange:t}):null}const Sl=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Gt(t,e){d.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function W(t,e,n){d.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const bl=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:c,onClickConnectEnd:a,nodesDraggable:u,nodesConnectable:l,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:g,elevateNodesOnSelect:_,minZoom:y,maxZoom:x,nodeExtent:m,onNodesChange:S,onEdgesChange:N,elementsSelectable:w,connectionMode:A,snapGrid:C,snapToGrid:z,translateExtent:H,connectOnClick:$,defaultEdgeOptions:V,fitView:P,fitViewOptions:B,onNodesDelete:D,onEdgesDelete:h,onNodeDrag:b,onNodeDragStart:v,onNodeDragStop:M,onSelectionDrag:I,onSelectionDragStart:E,onSelectionDragStop:T,noPanClassName:k,nodeOrigin:R,rfId:F,autoPanOnConnect:O,autoPanOnNodeDrag:Z,onError:U,connectionRadius:X,isValidConnection:q,nodeDragThreshold:K})=>{const{setNodes:G,setEdges:rt,setDefaultNodesAndEdges:et,setMinZoom:at,setMaxZoom:st,setTranslateExtent:tt,setNodeExtent:ut,reset:Q}=J(Sl,ot),L=nt();return d.useEffect(()=>{const lt=o?.map(xt=>({...xt,...V}));return et(n,lt),()=>{Q()}},[]),W("defaultEdgeOptions",V,L.setState),W("connectionMode",A,L.setState),W("onConnect",r,L.setState),W("onConnectStart",i,L.setState),W("onConnectEnd",s,L.setState),W("onClickConnectStart",c,L.setState),W("onClickConnectEnd",a,L.setState),W("nodesDraggable",u,L.setState),W("nodesConnectable",l,L.setState),W("nodesFocusable",f,L.setState),W("edgesFocusable",p,L.setState),W("edgesUpdatable",g,L.setState),W("elementsSelectable",w,L.setState),W("elevateNodesOnSelect",_,L.setState),W("snapToGrid",z,L.setState),W("snapGrid",C,L.setState),W("onNodesChange",S,L.setState),W("onEdgesChange",N,L.setState),W("connectOnClick",$,L.setState),W("fitViewOnInit",P,L.setState),W("fitViewOnInitOptions",B,L.setState),W("onNodesDelete",D,L.setState),W("onEdgesDelete",h,L.setState),W("onNodeDrag",b,L.setState),W("onNodeDragStart",v,L.setState),W("onNodeDragStop",M,L.setState),W("onSelectionDrag",I,L.setState),W("onSelectionDragStart",E,L.setState),W("onSelectionDragStop",T,L.setState),W("noPanClassName",k,L.setState),W("nodeOrigin",R,L.setState),W("rfId",F,L.setState),W("autoPanOnConnect",O,L.setState),W("autoPanOnNodeDrag",Z,L.setState),W("onError",U,L.setState),W("connectionRadius",X,L.setState),W("isValidConnection",q,L.setState),W("nodeDragThreshold",K,L.setState),Gt(t,G),Gt(e,rt),Gt(y,at),Gt(x,st),Gt(H,tt),Gt(m,ut),null},ho={display:"none"},Nl={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Sr="react-flow__node-desc",br="react-flow__edge-desc",Cl="react-flow__aria-live",Ml=t=>t.ariaLiveMessage;function Al({rfId:t}){const e=J(Ml);return d.createElement("div",{id:`${Cl}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Nl},e)}function Tl({rfId:t,disableKeyboardA11y:e}){return d.createElement(d.Fragment,null,d.createElement("div",{id:`${Sr}-${t}`,style:ho},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),d.createElement("div",{id:`${br}-${t}`,style:ho},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&d.createElement(Al,{rfId:t}))}var ve=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,o]=d.useState(!1),r=d.useRef(!1),i=d.useRef(new Set([])),[s,c]=d.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.split("+")),l=u.reduce((f,p)=>f.concat(...p),[]);return[u,l]}return[[],[]]},[t]);return d.useEffect(()=>{const a=typeof document<"u"?document:null,u=e?.target||a;if(t!==null){const l=g=>{if(r.current=g.ctrlKey||g.metaKey||g.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&mn(g))return!1;const y=go(g.code,c);i.current.add(g[y]),po(s,i.current,!1)&&(g.preventDefault(),o(!0))},f=g=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&mn(g))return!1;const y=go(g.code,c);po(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(g[y]),g.key==="Meta"&&i.current.clear(),r.current=!1},p=()=>{i.current.clear(),o(!1)};return u?.addEventListener("keydown",l),u?.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u?.removeEventListener("keydown",l),u?.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[t,o]),n};function po(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function go(t,e){return e.includes(t)?"code":"key"}function Nr(t,e,n,o){const r=t.parentNode||t.parentId;if(!r)return n;const i=e.get(r),s=Bt(i,o);return Nr(i,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(i[j]?.z??0)>(n.z??0)?i[j]?.z??0:n.z??0},o)}function Cr(t,e,n){t.forEach(o=>{const r=o.parentNode||o.parentId;if(r&&!t.has(r))throw new Error(`Parent node ${r} not found`);if(r||n?.[o.id]){const{x:i,y:s,z:c}=Nr(o,t,{...o.position,z:o[j]?.z??0},e);o.positionAbsolute={x:i,y:s},o[j].z=c,n?.[o.id]&&(o[j].isParent=!0)}})}function rn(t,e,n,o){const r=new Map,i={},s=o?1e3:0;return t.forEach(c=>{const a=(ht(c.zIndex)?c.zIndex:0)+(c.selected?s:0),u=e.get(c.id),l={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},f=c.parentNode||c.parentId;f&&(i[f]=!0);const p=u?.type&&u?.type!==c.type;Object.defineProperty(l,j,{enumerable:!1,value:{handleBounds:p?void 0:u?.[j]?.handleBounds,z:a}}),r.set(c.id,l)}),Cr(r,n,i),r}function Mr(t,e={}){const{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:c,d3Selection:a,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:f}=t(),p=e.initial&&!u&&l;if(c&&a&&(p||!e.initial)){const _=n().filter(x=>{const m=e.includeHiddenNodes?x.width&&x.height:!x.hidden;return e.nodes?.length?m&&e.nodes.some(S=>S.id===x.id):m}),y=_.every(x=>x.width&&x.height);if(_.length>0&&y){const x=We(_,f),{x:m,y:S,zoom:N}=fr(x,o,r,e.minZoom??i,e.maxZoom??s,e.padding??.1),w=bt.translate(m,S).scale(N);return typeof e.duration=="number"&&e.duration>0?c.transform(Pt(a,e.duration),w):c.transform(a,w),!0}}return!1}function $l(t,e){return t.forEach(n=>{const o=e.get(n.id);o&&e.set(o.id,{...o,[j]:o[j],selected:n.selected})}),new Map(e)}function kl(t,e){return e.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Ce({changedNodes:t,changedEdges:e,get:n,set:o}){const{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:c,hasDefaultNodes:a,hasDefaultEdges:u}=n();t?.length&&(a&&o({nodeInternals:$l(t,r)}),s?.(t)),e?.length&&(u&&o({edges:kl(e,i)}),c?.(e))}const Kt=()=>{},Il={zoomIn:Kt,zoomOut:Kt,zoomTo:Kt,getZoom:()=>1,setViewport:Kt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Kt,fitBounds:Kt,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},zl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Rl=()=>{const t=nt(),{d3Zoom:e,d3Selection:n}=J(zl,ot);return d.useMemo(()=>n&&e?{zoomIn:r=>e.scaleBy(Pt(n,r?.duration),1.2),zoomOut:r=>e.scaleBy(Pt(n,r?.duration),1/1.2),zoomTo:(r,i)=>e.scaleTo(Pt(n,i?.duration),r),getZoom:()=>t.getState().transform[2],setViewport:(r,i)=>{const[s,c,a]=t.getState().transform,u=bt.translate(r.x??s,r.y??c).scale(r.zoom??a);e.transform(Pt(n,i?.duration),u)},getViewport:()=>{const[r,i,s]=t.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>Mr(t.getState,r),setCenter:(r,i,s)=>{const{width:c,height:a,maxZoom:u}=t.getState(),l=typeof s?.zoom<"u"?s.zoom:u,f=c/2-r*l,p=a/2-i*l,g=bt.translate(f,p).scale(l);e.transform(Pt(n,s?.duration),g)},fitBounds:(r,i)=>{const{width:s,height:c,minZoom:a,maxZoom:u}=t.getState(),{x:l,y:f,zoom:p}=fr(r,s,c,a,u,i?.padding??.1),g=bt.translate(l,f).scale(p);e.transform(Pt(n,i?.duration),g)},project:r=>{const{transform:i,snapToGrid:s,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vn(r,i,s,c)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:s,snapGrid:c,domNode:a}=t.getState();if(!a)return r;const{x:u,y:l}=a.getBoundingClientRect(),f={x:r.x-u,y:r.y-l};return vn(f,i,s,c)},flowToScreenPosition:r=>{const{transform:i,domNode:s}=t.getState();if(!s)return r;const{x:c,y:a}=s.getBoundingClientRect(),u=lr(r,i);return{x:u.x+c,y:u.y+a}},viewportInitialized:!0}:Il,[e,n])};function Pn(){const t=Rl(),e=nt(),n=d.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),o=d.useCallback(y=>e.getState().nodeInternals.get(y),[]),r=d.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(x=>({...x}))},[]),i=d.useCallback(y=>{const{edges:x=[]}=e.getState();return x.find(m=>m.id===y)},[]),s=d.useCallback(y=>{const{getNodes:x,setNodes:m,hasDefaultNodes:S,onNodesChange:N}=e.getState(),w=x(),A=typeof y=="function"?y(w):y;if(S)m(A);else if(N){const C=A.length===0?w.map(z=>({type:"remove",id:z.id})):A.map(z=>({item:z,type:"reset"}));N(C)}},[]),c=d.useCallback(y=>{const{edges:x=[],setEdges:m,hasDefaultEdges:S,onEdgesChange:N}=e.getState(),w=typeof y=="function"?y(x):y;if(S)m(w);else if(N){const A=w.length===0?x.map(C=>({type:"remove",id:C.id})):w.map(C=>({item:C,type:"reset"}));N(A)}},[]),a=d.useCallback(y=>{const x=Array.isArray(y)?y:[y],{getNodes:m,setNodes:S,hasDefaultNodes:N,onNodesChange:w}=e.getState();if(N){const C=[...m(),...x];S(C)}else if(w){const A=x.map(C=>({item:C,type:"add"}));w(A)}},[]),u=d.useCallback(y=>{const x=Array.isArray(y)?y:[y],{edges:m=[],setEdges:S,hasDefaultEdges:N,onEdgesChange:w}=e.getState();if(N)S([...m,...x]);else if(w){const A=x.map(C=>({item:C,type:"add"}));w(A)}},[]),l=d.useCallback(()=>{const{getNodes:y,edges:x=[],transform:m}=e.getState(),[S,N,w]=m;return{nodes:y().map(A=>({...A})),edges:x.map(A=>({...A})),viewport:{x:S,y:N,zoom:w}}},[]),f=d.useCallback(({nodes:y,edges:x})=>{const{nodeInternals:m,getNodes:S,edges:N,hasDefaultNodes:w,hasDefaultEdges:A,onNodesDelete:C,onEdgesDelete:z,onNodesChange:H,onEdgesChange:$}=e.getState(),V=(y||[]).map(b=>b.id),P=(x||[]).map(b=>b.id),B=S().reduce((b,v)=>{const M=v.parentNode||v.parentId,I=!V.includes(v.id)&&M&&b.find(T=>T.id===M);return(typeof v.deletable!="boolean"||v.deletable)&&(V.includes(v.id)||I)&&b.push(v),b},[]),D=N.filter(b=>typeof b.deletable=="boolean"?b.deletable:!0),h=D.filter(b=>P.includes(b.id));if(B||h){const b=dr(B,D),v=[...h,...b],M=v.reduce((I,E)=>(I.includes(E.id)||I.push(E.id),I),[]);if((A||w)&&(A&&e.setState({edges:N.filter(I=>!M.includes(I.id))}),w&&(B.forEach(I=>{m.delete(I.id)}),e.setState({nodeInternals:new Map(m)}))),M.length>0&&(z?.(v),$&&$(M.map(I=>({id:I,type:"remove"})))),B.length>0&&(C?.(B),H)){const I=B.map(E=>({id:E.id,type:"remove"}));H(I)}}},[]),p=d.useCallback(y=>{const x=tl(y),m=x?null:e.getState().nodeInternals.get(y.id);return!x&&!m?[null,null,x]:[x?y:io(m),m,x]},[]),g=d.useCallback((y,x=!0,m)=>{const[S,N,w]=p(y);return S?(m||e.getState().getNodes()).filter(A=>{if(!w&&(A.id===N.id||!A.positionAbsolute))return!1;const C=io(A),z=gn(C,S);return x&&z>0||z>=S.width*S.height}):[]},[]),_=d.useCallback((y,x,m=!0)=>{const[S]=p(y);if(!S)return!1;const N=gn(S,x);return m&&N>0||N>=S.width*S.height},[]);return d.useMemo(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:c,addNodes:a,addEdges:u,toObject:l,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:_}),[t,n,o,r,i,s,c,a,u,l,f,g,_])}const Dl={actInsideInputWithModifier:!1};var Hl=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nt(),{deleteElements:o}=Pn(),r=ve(t,Dl),i=ve(e);d.useEffect(()=>{if(r){const{edges:s,getNodes:c}=n.getState(),a=c().filter(l=>l.selected),u=s.filter(l=>l.selected);o({nodes:a,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),d.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Pl(t){const e=nt();d.useEffect(()=>{let n;const o=()=>{if(!t.current)return;const r=Tn(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ct.error004()),e.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}const Vn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vl=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Me=t=>({x:t.x,y:t.y,zoom:t.k}),qt=(t,e)=>t.target.closest(`.${e}`),mo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),yo=t=>{const e=t.ctrlKey&&He()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Bl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Ol=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:c=.5,panOnScrollMode:a=Vt.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:f=!0,defaultViewport:p,translateExtent:g,minZoom:_,maxZoom:y,zoomActivationKeyCode:x,preventScrolling:m=!0,children:S,noWheelClassName:N,noPanClassName:w})=>{const A=d.useRef(),C=nt(),z=d.useRef(!1),H=d.useRef(!1),$=d.useRef(null),V=d.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:B,d3ZoomHandler:D,userSelectionActive:h}=J(Bl,ot),b=ve(x),v=d.useRef(0),M=d.useRef(!1),I=d.useRef();return Pl($),d.useEffect(()=>{if($.current){const E=$.current.getBoundingClientRect(),T=Qo().scaleExtent([_,y]).translateExtent(g),k=ft($.current).call(T),R=bt.translate(p.x,p.y).scale(oe(p.zoom,_,y)),F=[[0,0],[E.width,E.height]],O=T.constrain()(R,F,g);T.transform(k,O),T.wheelDelta(yo),C.setState({d3Zoom:T,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[O.x,O.y,O.k],domNode:$.current.closest(".react-flow")})}},[]),d.useEffect(()=>{B&&P&&(s&&!b&&!h?B.on("wheel.zoom",E=>{if(qt(E,N))return!1;E.preventDefault(),E.stopImmediatePropagation();const T=B.property("__zoom").k||1;if(E.ctrlKey&&i){const q=pt(E),K=yo(E),G=T*Math.pow(2,K);P.scaleTo(B,G,q,E);return}const k=E.deltaMode===1?20:1;let R=a===Vt.Vertical?0:E.deltaX*k,F=a===Vt.Horizontal?0:E.deltaY*k;!He()&&E.shiftKey&&a!==Vt.Vertical&&(R=E.deltaY*k,F=0),P.translateBy(B,-(R/T)*c,-(F/T)*c,{internal:!0});const O=Me(B.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:U,onViewportChangeEnd:X}=C.getState();clearTimeout(I.current),M.current||(M.current=!0,e?.(E,O),Z?.(O)),M.current&&(t?.(E,O),U?.(O),I.current=setTimeout(()=>{n?.(E,O),X?.(O),M.current=!1},150))},{passive:!1}):typeof D<"u"&&B.on("wheel.zoom",function(E,T){if(!m&&E.type==="wheel"&&!E.ctrlKey||qt(E,N))return null;E.preventDefault(),D.call(this,E,T)},{passive:!1}))},[h,s,a,B,P,D,b,i,m,N,e,t,n]),d.useEffect(()=>{P&&P.on("start",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;v.current=E.sourceEvent?.button;const{onViewportChangeStart:T}=C.getState(),k=Me(E.transform);z.current=!0,V.current=k,E.sourceEvent?.type==="mousedown"&&C.setState({paneDragging:!0}),T?.(k),e?.(E.sourceEvent,k)})},[P,e]),d.useEffect(()=>{P&&(h&&!z.current?P.on("zoom",null):h||P.on("zoom",E=>{const{onViewportChange:T}=C.getState();if(C.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),H.current=!!(o&&mo(f,v.current??0)),(t||T)&&!E.sourceEvent?.internal){const k=Me(E.transform);T?.(k),t?.(E.sourceEvent,k)}}))},[h,P,t,f,o]),d.useEffect(()=>{P&&P.on("end",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=C.getState();if(z.current=!1,C.setState({paneDragging:!1}),o&&mo(f,v.current??0)&&!H.current&&o(E.sourceEvent),H.current=!1,(n||T)&&Vl(V.current,E.transform)){const k=Me(E.transform);V.current=k,clearTimeout(A.current),A.current=setTimeout(()=>{T?.(k),n?.(E.sourceEvent,k)},s?150:0)}})},[P,s,f,n,o]),d.useEffect(()=>{P&&P.filter(E=>{const T=b||r,k=i&&E.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&E.button===1&&E.type==="mousedown"&&(qt(E,"react-flow__node")||qt(E,"react-flow__edge")))return!0;if(!f&&!T&&!s&&!u&&!i||h||!u&&E.type==="dblclick"||qt(E,N)&&E.type==="wheel"||qt(E,w)&&(E.type!=="wheel"||s&&E.type==="wheel"&&!b)||!i&&E.ctrlKey&&E.type==="wheel"||!T&&!s&&!k&&E.type==="wheel"||!f&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(f)&&!f.includes(E.button)&&E.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&R})},[h,P,r,i,s,u,f,l,b]),d.createElement("div",{className:"react-flow__renderer",ref:$,style:Vn},S)},Fl=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Ll(){const{userSelectionActive:t,userSelectionRect:e}=J(Fl,ot);return t&&e?d.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function wo(t,e){const n=e.parentNode||e.parentId,o=t.find(r=>r.id===n);if(o){const r=e.position.x+e.width-o.width,i=e.position.y+e.height-o.height;if(r>0||i>0||e.position.x<0||e.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),i>0&&(o.style.height+=i),e.position.x<0){const s=Math.abs(e.position.x);o.position.x=o.position.x-s,o.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);o.position.y=o.position.y-s,o.style.height+=s,e.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Ar(t,e){if(t.some(o=>o.type==="reset"))return t.filter(o=>o.type==="reset").map(o=>o.item);const n=t.filter(o=>o.type==="add").map(o=>o.item);return e.reduce((o,r)=>{const i=t.filter(c=>c.id===r.id);if(i.length===0)return o.push(r),o;const s={...r};for(const c of i)if(c)switch(c.type){case"select":{s.selected=c.selected;break}case"position":{typeof c.position<"u"&&(s.position=c.position),typeof c.positionAbsolute<"u"&&(s.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(s.dragging=c.dragging),s.expandParent&&wo(o,s);break}case"dimensions":{typeof c.dimensions<"u"&&(s.width=c.dimensions.width,s.height=c.dimensions.height),typeof c.updateStyle<"u"&&(s.style={...s.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(s.resizing=c.resizing),s.expandParent&&wo(o,s);break}case"remove":return o}return o.push(s),o},n)}function Tr(t,e){return Ar(t,e)}function Yl(t,e){return Ar(t,e)}const At=(t,e)=>({id:t,type:"select",selected:e});function Jt(t,e){return t.reduce((n,o)=>{const r=e.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(At(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(At(o.id,!1))),n},[])}const sn=(t,e)=>n=>{n.target===e.current&&t?.(n)},Zl=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),$r=d.memo(({isSelecting:t,selectionMode:e=we.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:c,onPaneMouseEnter:a,onPaneMouseMove:u,onPaneMouseLeave:l,children:f})=>{const p=d.useRef(null),g=nt(),_=d.useRef(0),y=d.useRef(0),x=d.useRef(),{userSelectionActive:m,elementsSelectable:S,dragging:N}=J(Zl,ot),w=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),_.current=0,y.current=0},A=D=>{i?.(D),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},C=D=>{if(Array.isArray(n)&&n?.includes(2)){D.preventDefault();return}s?.(D)},z=c?D=>c(D):void 0,H=D=>{const{resetSelectedElements:h,domNode:b}=g.getState();if(x.current=b?.getBoundingClientRect(),!S||!t||D.button!==0||D.target!==p.current||!x.current)return;const{x:v,y:M}=$t(D,x.current);h(),g.setState({userSelectionRect:{width:0,height:0,startX:v,startY:M,x:v,y:M}}),o?.(D)},$=D=>{const{userSelectionRect:h,nodeInternals:b,edges:v,transform:M,onNodesChange:I,onEdgesChange:E,nodeOrigin:T,getNodes:k}=g.getState();if(!t||!x.current||!h)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=$t(D,x.current),F=h.startX??0,O=h.startY??0,Z={...h,x:R.x<F?R.x:F,y:R.y<O?R.y:O,width:Math.abs(R.x-F),height:Math.abs(R.y-O)},U=k(),X=ur(b,Z,M,e===we.Partial,!0,T),q=dr(X,v).map(G=>G.id),K=X.map(G=>G.id);if(_.current!==K.length){_.current=K.length;const G=Jt(U,K);G.length&&I?.(G)}if(y.current!==q.length){y.current=q.length;const G=Jt(v,q);G.length&&E?.(G)}g.setState({userSelectionRect:Z})},V=D=>{if(D.button!==0)return;const{userSelectionRect:h}=g.getState();!m&&h&&D.target===p.current&&A?.(D),g.setState({nodesSelectionActive:_.current>0}),w(),r?.(D)},P=D=>{m&&(g.setState({nodesSelectionActive:_.current>0}),r?.(D)),w()},B=S&&(t||m);return d.createElement("div",{className:it(["react-flow__pane",{dragging:N,selection:t}]),onClick:B?void 0:sn(A,p),onContextMenu:sn(C,p),onWheel:sn(z,p),onMouseEnter:B?void 0:a,onMouseDown:B?H:void 0,onMouseMove:B?$:u,onMouseUp:B?V:void 0,onMouseLeave:B?P:l,ref:p,style:Vn},f,d.createElement(Ll,null))});$r.displayName="Pane";function kr(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const o=e.get(n);return o?o.selected?!0:kr(o,e):!1}function vo(t,e,n){let o=t;do{if(o?.matches(e))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Ul(t,e,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!kr(r,t))&&(r.draggable||e&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}))}function Wl(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Ir(t,e,n,o,r=[0,0],i){const s=Wl(t,t.extent||o);let c=s;const a=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(a&&t.width&&t.height){const f=n.get(a),{x:p,y:g}=Bt(f,r).positionAbsolute;c=f&&ht(p)&&ht(g)&&ht(f.width)&&ht(f.height)?[[p+t.width*r[0],g+t.height*r[1]],[p+f.width-t.width+t.width*r[0],g+f.height-t.height+t.height*r[1]]]:c}else i?.("005",Ct.error005()),c=s;else if(t.extent&&a&&t.extent!=="parent"){const f=n.get(a),{x:p,y:g}=Bt(f,r).positionAbsolute;c=[[t.extent[0][0]+p,t.extent[0][1]+g],[t.extent[1][0]+p,t.extent[1][1]+g]]}let u={x:0,y:0};if(a){const f=n.get(a);u=Bt(f,r).positionAbsolute}const l=c&&c!=="parent"?$n(e,c):e;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function cn({nodeId:t,dragItems:e,nodeInternals:n}){const o=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}const xo=(t,e,n,o)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const i=Array.from(r),s=e.getBoundingClientRect(),c={x:s.width*o[0],y:s.height*o[1]};return i.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(u.left-s.left-c.x)/n,y:(u.top-s.top-c.y)/n,...Tn(a)}})};function ue(t,e,n){return n===void 0?n:o=>{const r=e().nodeInternals.get(t);r&&n(o,{...r})}}function _n({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:c,onError:a}=e.getState(),u=c.get(t);if(!u){a?.("012",Ct.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([t])}function Xl(){const t=nt();return d.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:i}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,a={x:(s-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(a.x/r[0]):a.x,ySnapped:i?r[1]*Math.round(a.y/r[1]):a.y,...a}},[])}function an(t){return(e,n,o)=>t?.(e,o)}function zr({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){const c=nt(),[a,u]=d.useState(!1),l=d.useRef([]),f=d.useRef({x:null,y:null}),p=d.useRef(0),g=d.useRef(null),_=d.useRef({x:0,y:0}),y=d.useRef(null),x=d.useRef(!1),m=d.useRef(!1),S=d.useRef(!1),N=Xl();return d.useEffect(()=>{if(t?.current){const w=ft(t.current),A=({x:H,y:$})=>{const{nodeInternals:V,onNodeDrag:P,onSelectionDrag:B,updateNodePositions:D,nodeExtent:h,snapGrid:b,snapToGrid:v,nodeOrigin:M,onError:I}=c.getState();f.current={x:H,y:$};let E=!1,T={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&h){const R=We(l.current,M);T=ye(R)}if(l.current=l.current.map(R=>{const F={x:H-R.distance.x,y:$-R.distance.y};v&&(F.x=b[0]*Math.round(F.x/b[0]),F.y=b[1]*Math.round(F.y/b[1]));const O=[[h[0][0],h[0][1]],[h[1][0],h[1][1]]];l.current.length>1&&h&&!R.extent&&(O[0][0]=R.positionAbsolute.x-T.x+h[0][0],O[1][0]=R.positionAbsolute.x+(R.width??0)-T.x2+h[1][0],O[0][1]=R.positionAbsolute.y-T.y+h[0][1],O[1][1]=R.positionAbsolute.y+(R.height??0)-T.y2+h[1][1]);const Z=Ir(R,F,V,O,M,I);return E=E||R.position.x!==Z.position.x||R.position.y!==Z.position.y,R.position=Z.position,R.positionAbsolute=Z.positionAbsolute,R}),!E)return;D(l.current,!0,!0),u(!0);const k=r?P:an(B);if(k&&y.current){const[R,F]=cn({nodeId:r,dragItems:l.current,nodeInternals:V});k(y.current,R,F)}},C=()=>{if(!g.current)return;const[H,$]=jo(_.current,g.current);if(H!==0||$!==0){const{transform:V,panBy:P}=c.getState();f.current.x=(f.current.x??0)-H/V[2],f.current.y=(f.current.y??0)-$/V[2],P({x:H,y:$})&&A(f.current)}p.current=requestAnimationFrame(C)},z=H=>{const{nodeInternals:$,multiSelectionActive:V,nodesDraggable:P,unselectNodesAndEdges:B,onNodeDragStart:D,onSelectionDragStart:h}=c.getState();m.current=!0;const b=r?D:an(h);(!s||!i)&&!V&&r&&($.get(r)?.selected||B()),r&&i&&s&&_n({id:r,store:c,nodeRef:t});const v=N(H);if(f.current=v,l.current=Ul($,P,v,r),b&&l.current){const[M,I]=cn({nodeId:r,dragItems:l.current,nodeInternals:$});b(H.sourceEvent,M,I)}};if(e)w.on(".drag",null);else{const H=$c().on("start",$=>{const{domNode:V,nodeDragThreshold:P}=c.getState();P===0&&z($),S.current=!1;const B=N($);f.current=B,g.current=V?.getBoundingClientRect()||null,_.current=$t($.sourceEvent,g.current)}).on("drag",$=>{const V=N($),{autoPanOnNodeDrag:P,nodeDragThreshold:B}=c.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(S.current=!0),!S.current){if(!x.current&&m.current&&P&&(x.current=!0,C()),!m.current){const D=V.xSnapped-(f?.current?.x??0),h=V.ySnapped-(f?.current?.y??0);Math.sqrt(D*D+h*h)>B&&z($)}(f.current.x!==V.xSnapped||f.current.y!==V.ySnapped)&&l.current&&m.current&&(y.current=$.sourceEvent,_.current=$t($.sourceEvent,g.current),A(V))}}).on("end",$=>{if(!(!m.current||S.current)&&(u(!1),x.current=!1,m.current=!1,cancelAnimationFrame(p.current),l.current)){const{updateNodePositions:V,nodeInternals:P,onNodeDragStop:B,onSelectionDragStop:D}=c.getState(),h=r?B:an(D);if(V(l.current,!1,!1),h){const[b,v]=cn({nodeId:r,dragItems:l.current,nodeInternals:P});h($.sourceEvent,b,v)}}}).filter($=>{const V=$.target;return!$.button&&(!n||!vo(V,`.${n}`,t))&&(!o||vo(V,o,t))});return w.call(H),()=>{w.on(".drag",null)}}}},[t,e,n,o,i,c,r,s,N]),a}function Rr(){const t=nt();return d.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:c,snapGrid:a,onError:u,nodesDraggable:l}=t.getState(),f=s().filter(S=>S.selected&&(S.draggable||l&&typeof S.draggable>"u")),p=c?a[0]:5,g=c?a[1]:5,_=n.isShiftPressed?4:1,y=n.x*p*_,x=n.y*g*_,m=f.map(S=>{if(S.positionAbsolute){const N={x:S.positionAbsolute.x+y,y:S.positionAbsolute.y+x};c&&(N.x=a[0]*Math.round(N.x/a[0]),N.y=a[1]*Math.round(N.y/a[1]));const{positionAbsolute:w,position:A}=Ir(S,N,o,r,void 0,u);S.position=A,S.positionAbsolute=w}return S});i(m,!0,!1)},[])}const te={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var de=t=>{const e=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:c,yPosOrigin:a,selected:u,onClick:l,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,onContextMenu:_,onDoubleClick:y,style:x,className:m,isDraggable:S,isSelectable:N,isConnectable:w,isFocusable:A,selectNodesOnDrag:C,sourcePosition:z,targetPosition:H,hidden:$,resizeObserver:V,dragHandle:P,zIndex:B,isParent:D,noDragClassName:h,noPanClassName:b,initialized:v,disableKeyboardA11y:M,ariaLabel:I,rfId:E,hasHandleBounds:T})=>{const k=nt(),R=d.useRef(null),F=d.useRef(null),O=d.useRef(z),Z=d.useRef(H),U=d.useRef(o),X=N||S||l||f||p||g,q=Rr(),K=ue(n,k.getState,f),G=ue(n,k.getState,p),rt=ue(n,k.getState,g),et=ue(n,k.getState,_),at=ue(n,k.getState,y),st=Q=>{const{nodeDragThreshold:L}=k.getState();if(N&&(!C||!S||L>0)&&_n({id:n,store:k,nodeRef:R}),l){const lt=k.getState().nodeInternals.get(n);lt&&l(Q,{...lt})}},tt=Q=>{if(!mn(Q)&&!M)if(or.includes(Q.key)&&N){const L=Q.key==="Escape";_n({id:n,store:k,unselect:L,nodeRef:R})}else S&&u&&Object.prototype.hasOwnProperty.call(te,Q.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),q({x:te[Q.key].x,y:te[Q.key].y,isShiftPressed:Q.shiftKey}))};d.useEffect(()=>()=>{F.current&&(V?.unobserve(F.current),F.current=null)},[]),d.useEffect(()=>{if(R.current&&!$){const Q=R.current;(!v||!T||F.current!==Q)&&(F.current&&V?.unobserve(F.current),V?.observe(Q),F.current=Q)}},[$,v,T]),d.useEffect(()=>{const Q=U.current!==o,L=O.current!==z,lt=Z.current!==H;R.current&&(Q||L||lt)&&(Q&&(U.current=o),L&&(O.current=z),lt&&(Z.current=H),k.getState().updateNodeDimensions([{id:n,nodeElement:R.current,forceUpdate:!0}]))},[n,o,z,H]);const ut=zr({nodeRef:R,disabled:$||!S,noDragClassName:h,handleSelector:P,nodeId:n,isSelectable:N,selectNodesOnDrag:C});return $?null:d.createElement("div",{className:it(["react-flow__node",`react-flow__node-${o}`,{[b]:S},m,{selected:u,selectable:N,parent:D,dragging:ut}]),ref:R,style:{zIndex:B,transform:`translate(${c}px,${a}px)`,pointerEvents:X?"all":"none",visibility:v?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:K,onMouseMove:G,onMouseLeave:rt,onContextMenu:et,onClick:st,onDoubleClick:at,onKeyDown:A?tt:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":M?void 0:`${Sr}-${E}`,"aria-label":I},d.createElement(cl,{value:n},d.createElement(t,{id:n,data:r,type:o,xPos:i,yPos:s,selected:u,isConnectable:w,sourcePosition:z,targetPosition:H,dragging:ut,dragHandle:P,zIndex:B})))};return e.displayName="NodeWrapper",d.memo(e)};const Gl=t=>{const e=t.getNodes().filter(n=>n.selected);return{...We(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function Kl({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=nt(),{width:r,height:i,x:s,y:c,transformString:a,userSelectionActive:u}=J(Gl,ot),l=Rr(),f=d.useRef(null);if(d.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),zr({nodeRef:f}),u||!r||!i)return null;const p=t?_=>{const y=o.getState().getNodes().filter(x=>x.selected);t(_,y)}:void 0,g=_=>{Object.prototype.hasOwnProperty.call(te,_.key)&&l({x:te[_.key].x,y:te[_.key].y,isShiftPressed:_.shiftKey})};return d.createElement("div",{className:it(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a}},d.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:r,height:i,top:c,left:s}}))}var ql=d.memo(Kl);const Ql=t=>t.nodesSelectionActive,Dr=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:c,onMove:a,onMoveStart:u,onMoveEnd:l,selectionKeyCode:f,selectionOnDrag:p,selectionMode:g,onSelectionStart:_,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:m,zoomActivationKeyCode:S,elementsSelectable:N,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:C,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:$,panOnDrag:V,defaultViewport:P,translateExtent:B,minZoom:D,maxZoom:h,preventScrolling:b,onSelectionContextMenu:v,noWheelClassName:M,noPanClassName:I,disableKeyboardA11y:E})=>{const T=J(Ql),k=ve(f),R=ve(m),F=R||V,O=R||C,Z=k||p&&F!==!0;return Hl({deleteKeyCode:c,multiSelectionKeyCode:x}),d.createElement(Ol,{onMove:a,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:O,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:$,panOnDrag:!k&&F,defaultViewport:P,translateExtent:B,minZoom:D,maxZoom:h,zoomActivationKeyCode:S,preventScrolling:b,noWheelClassName:M,noPanClassName:I},d.createElement($r,{onSelectionStart:_,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!Z,selectionMode:g},t,T&&d.createElement(ql,{onSelectionContextMenu:v,noPanClassName:I,disableKeyboardA11y:E})))};Dr.displayName="FlowRenderer";var Jl=d.memo(Dr);function jl(t){return J(d.useCallback(n=>t?ur(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function tu(t){const e={input:de(t.input||vr),default:de(t.default||xn),output:de(t.output||_r),group:de(t.group||Hn)},n={},o=Object.keys(t).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=de(t[i]||xn),r),n);return{...e,...o}}const eu=({x:t,y:e,width:n,height:o,origin:r})=>!n||!o?{x:t,y:e}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-o*r[1]},nu=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Hr=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=J(nu,ot),c=jl(t.onlyRenderVisibleElements),a=d.useRef(),u=d.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(f=>{const p=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));i(p)});return a.current=l,l},[]);return d.useEffect(()=>()=>{a?.current?.disconnect()},[]),d.createElement("div",{className:"react-flow__nodes",style:Vn},c.map(l=>{let f=l.type||"default";t.nodeTypes[f]||(s?.("003",Ct.error003(f)),f="default");const p=t.nodeTypes[f]||t.nodeTypes.default,g=!!(l.draggable||e&&typeof l.draggable>"u"),_=!!(l.selectable||r&&typeof l.selectable>"u"),y=!!(l.connectable||n&&typeof l.connectable>"u"),x=!!(l.focusable||o&&typeof l.focusable>"u"),m=t.nodeExtent?$n(l.positionAbsolute,t.nodeExtent):l.positionAbsolute,S=m?.x??0,N=m?.y??0,w=eu({x:S,y:N,width:l.width??0,height:l.height??0,origin:t.nodeOrigin});return d.createElement(p,{key:l.id,id:l.id,className:l.className,style:l.style,type:f,data:l.data,sourcePosition:l.sourcePosition||Y.Bottom,targetPosition:l.targetPosition||Y.Top,hidden:l.hidden,xPos:S,yPos:N,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!l.selected,isDraggable:g,isSelectable:_,isConnectable:y,isFocusable:x,resizeObserver:u,dragHandle:l.dragHandle,zIndex:l[j]?.z??0,isParent:!!l[j]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!l.width&&!!l.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!l[j]?.handleBounds})}))};Hr.displayName="NodeRenderer";var ou=d.memo(Hr);const ru=(t,e,n)=>n===Y.Left?t-e:n===Y.Right?t+e:t,iu=(t,e,n)=>n===Y.Top?t-e:n===Y.Bottom?t+e:t,_o="react-flow__edgeupdater",Eo=({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:c})=>d.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:it([_o,`${_o}-${c}`]),cx:ru(e,o,t),cy:iu(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),su=()=>!0;var Qt=t=>{const e=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:c,selected:a,animated:u,label:l,labelStyle:f,labelShowBg:p,labelBgStyle:g,labelBgPadding:_,labelBgBorderRadius:y,style:x,source:m,target:S,sourceX:N,sourceY:w,targetX:A,targetY:C,sourcePosition:z,targetPosition:H,elementsSelectable:$,hidden:V,sourceHandleId:P,targetHandleId:B,onContextMenu:D,onMouseEnter:h,onMouseMove:b,onMouseLeave:v,reconnectRadius:M,onReconnect:I,onReconnectStart:E,onReconnectEnd:T,markerEnd:k,markerStart:R,rfId:F,ariaLabel:O,isFocusable:Z,isReconnectable:U,pathOptions:X,interactionWidth:q,disableKeyboardA11y:K})=>{const G=d.useRef(null),[rt,et]=d.useState(!1),[at,st]=d.useState(!1),tt=nt(),ut=d.useMemo(()=>`url('#${wn(R,F)}')`,[R,F]),Q=d.useMemo(()=>`url('#${wn(k,F)}')`,[k,F]);if(V)return null;const L=ct=>{const{edges:yt,addSelectedEdges:zt,unselectNodesAndEdges:Rt,multiSelectionActive:Xt}=tt.getState(),wt=yt.find(Dt=>Dt.id===n);wt&&($&&(tt.setState({nodesSelectionActive:!1}),wt.selected&&Xt?(Rt({nodes:[],edges:[wt]}),G.current?.blur()):zt([n])),s&&s(ct,wt))},lt=le(n,tt.getState,c),xt=le(n,tt.getState,D),re=le(n,tt.getState,h),Lt=le(n,tt.getState,b),Yt=le(n,tt.getState,v),_t=(ct,yt)=>{if(ct.button!==0)return;const{edges:zt,isValidConnection:Rt}=tt.getState(),Xt=yt?S:m,wt=(yt?B:P)||null,Dt=yt?"target":"source",Xe=Rt||su,Ge=yt,se=zt.find(Ht=>Ht.id===n);st(!0),E?.(ct,se,Dt);const Ke=Ht=>{st(!1),T?.(Ht,se,Dt)};gr({event:ct,handleId:wt,nodeId:Xt,onConnect:Ht=>I?.(se,Ht),isTarget:Ge,getState:tt.getState,setState:tt.setState,isValidConnection:Xe,edgeUpdaterType:Dt,onReconnectEnd:Ke})},Zt=ct=>_t(ct,!0),kt=ct=>_t(ct,!1),It=()=>et(!0),Ut=()=>et(!1),Wt=!$&&!s,ie=ct=>{if(!K&&or.includes(ct.key)&&$){const{unselectNodesAndEdges:yt,addSelectedEdges:zt,edges:Rt}=tt.getState();ct.key==="Escape"?(G.current?.blur(),yt({edges:[Rt.find(wt=>wt.id===n)]})):zt([n])}};return d.createElement("g",{className:it(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:a,animated:u,inactive:Wt,updating:rt}]),onClick:L,onDoubleClick:lt,onContextMenu:xt,onMouseEnter:re,onMouseMove:Lt,onMouseLeave:Yt,onKeyDown:Z?ie:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":O===null?void 0:O||`Edge from ${m} to ${S}`,"aria-describedby":Z?`${br}-${F}`:void 0,ref:G},!at&&d.createElement(t,{id:n,source:m,target:S,selected:a,animated:u,label:l,labelStyle:f,labelShowBg:p,labelBgStyle:g,labelBgPadding:_,labelBgBorderRadius:y,data:i,style:x,sourceX:N,sourceY:w,targetX:A,targetY:C,sourcePosition:z,targetPosition:H,sourceHandleId:P,targetHandleId:B,markerStart:ut,markerEnd:Q,pathOptions:X,interactionWidth:q}),U&&d.createElement(d.Fragment,null,(U==="source"||U===!0)&&d.createElement(Eo,{position:z,centerX:N,centerY:w,radius:M,onMouseDown:Zt,onMouseEnter:It,onMouseOut:Ut,type:"source"}),(U==="target"||U===!0)&&d.createElement(Eo,{position:H,centerX:A,centerY:C,radius:M,onMouseDown:kt,onMouseEnter:It,onMouseOut:Ut,type:"target"})))};return e.displayName="EdgeWrapper",d.memo(e)};function cu(t){const e={default:Qt(t.default||Ve),straight:Qt(t.bezier||zn),step:Qt(t.step||In),smoothstep:Qt(t.step||Ue),simplebezier:Qt(t.simplebezier||kn)},n={},o=Object.keys(t).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=Qt(t[i]||Ve),r),n);return{...e,...o}}function So(t,e,n=null){const o=(n?.x||0)+e.x,r=(n?.y||0)+e.y,i=n?.width||e.width,s=n?.height||e.height;switch(t){case Y.Top:return{x:o+i/2,y:r};case Y.Right:return{x:o+i,y:r+s/2};case Y.Bottom:return{x:o+i/2,y:r+s};case Y.Left:return{x:o,y:r+s/2}}}function bo(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const au=(t,e,n,o,r,i)=>{const s=So(n,t,e),c=So(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:c.x,targetY:c.y}};function lu({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:c,transform:a}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+r),y2:Math.max(t.y+o,e.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=ye({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:s/a[2],height:c/a[2]}),f=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),p=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(f*p)>0}function No(t){const e=t?.[j]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const uu=[{level:0,isMaxLevel:!0,edges:[]}];function du(t,e,n=!1){let o=-1;const r=t.reduce((s,c)=>{const a=ht(c.zIndex);let u=a?c.zIndex:0;if(n){const l=e.get(c.target),f=e.get(c.source),p=c.selected||l?.selected||f?.selected,g=Math.max(f?.[j]?.z||0,l?.[j]?.z||0,1e3);u=(a?c.zIndex:0)+(p?g:0)}return s[u]?s[u].push(c):s[u]=[c],o=u>o?u:o,s},{}),i=Object.entries(r).map(([s,c])=>{const a=+s;return{edges:c,level:a,isMaxLevel:a===o}});return i.length===0?uu:i}function fu(t,e,n){const o=J(d.useCallback(r=>t?r.edges.filter(i=>{const s=e.get(i.source),c=e.get(i.target);return s?.width&&s?.height&&c?.width&&c?.height&&lu({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:c.width,targetHeight:c.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[t,e]));return du(o,e,n)}const hu=({color:t="none",strokeWidth:e=1})=>d.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),pu=({color:t="none",strokeWidth:e=1})=>d.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Co={[Pe.Arrow]:hu,[Pe.ArrowClosed]:pu};function gu(t){const e=nt();return d.useMemo(()=>Object.prototype.hasOwnProperty.call(Co,t)?Co[t]:(e.getState().onError?.("009",Ct.error009(t)),null),[t])}const mu=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=gu(e);return a?d.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0"},d.createElement(a,{color:n,strokeWidth:s})):null},yu=({defaultColor:t,rfId:e})=>n=>{const o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const c=wn(s,e);o.includes(c)||(r.push({id:c,color:s.color||t,...s}),o.push(c))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},Pr=({defaultColor:t,rfId:e})=>{const n=J(d.useCallback(yu({defaultColor:t,rfId:e}),[t,e]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return d.createElement("defs",null,n.map(o=>d.createElement(mu,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Pr.displayName="MarkerDefinitions";var wu=d.memo(Pr);const vu=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Vr=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:_,reconnectRadius:y,children:x,disableKeyboardA11y:m})=>{const{edgesFocusable:S,edgesUpdatable:N,elementsSelectable:w,width:A,height:C,connectionMode:z,nodeInternals:H,onError:$}=J(vu,ot),V=fu(e,H,n);return A?d.createElement(d.Fragment,null,V.map(({level:P,edges:B,isMaxLevel:D})=>d.createElement("svg",{key:P,style:{zIndex:P},width:A,height:C,className:"react-flow__edges react-flow__container"},D&&d.createElement(wu,{defaultColor:t,rfId:o}),d.createElement("g",null,B.map(h=>{const[b,v,M]=No(H.get(h.source)),[I,E,T]=No(H.get(h.target));if(!M||!T)return null;let k=h.type||"default";r[k]||($?.("011",Ct.error011(k)),k="default");const R=r[k]||r.default,F=z===Ft.Strict?E.target:(E.target??[]).concat(E.source??[]),O=bo(v.source,h.sourceHandle),Z=bo(F,h.targetHandle),U=O?.position||Y.Bottom,X=Z?.position||Y.Top,q=!!(h.focusable||S&&typeof h.focusable>"u"),K=h.reconnectable||h.updatable,G=typeof p<"u"&&(K||N&&typeof K>"u");if(!O||!Z)return $?.("008",Ct.error008(O,h)),null;const{sourceX:rt,sourceY:et,targetX:at,targetY:st}=au(b,O,U,I,Z,X);return d.createElement(R,{key:h.id,id:h.id,className:it([h.className,i]),type:k,data:h.data,selected:!!h.selected,animated:!!h.animated,hidden:!!h.hidden,label:h.label,labelStyle:h.labelStyle,labelShowBg:h.labelShowBg,labelBgStyle:h.labelBgStyle,labelBgPadding:h.labelBgPadding,labelBgBorderRadius:h.labelBgBorderRadius,style:h.style,source:h.source,target:h.target,sourceHandleId:h.sourceHandle,targetHandleId:h.targetHandle,markerEnd:h.markerEnd,markerStart:h.markerStart,sourceX:rt,sourceY:et,targetX:at,targetY:st,sourcePosition:U,targetPosition:X,elementsSelectable:w,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,onClick:l,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:_,reconnectRadius:y,rfId:o,ariaLabel:h.ariaLabel,isFocusable:q,isReconnectable:G,pathOptions:"pathOptions"in h?h.pathOptions:void 0,interactionWidth:h.interactionWidth,disableKeyboardA11y:m})})))),x):null};Vr.displayName="EdgeRenderer";var xu=d.memo(Vr);const _u=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Eu({children:t}){const e=J(_u);return d.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Su(t){const e=Pn(),n=d.useRef(!1);d.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const bu={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Br=({nodeId:t,handleType:e,style:n,type:o=Tt.Bezier,CustomComponent:r,connectionStatus:i})=>{const{fromNode:s,handleId:c,toX:a,toY:u,connectionMode:l}=J(d.useCallback(C=>({fromNode:C.nodeInternals.get(t),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[t]),ot),f=s?.[j]?.handleBounds;let p=f?.[e];if(l===Ft.Loose&&(p=p||f?.[e==="source"?"target":"source"]),!s||!p)return null;const g=c?p.find(C=>C.id===c):p[0],_=g?g.x+g.width/2:(s.width??0)/2,y=g?g.y+g.height/2:s.height??0,x=(s.positionAbsolute?.x??0)+_,m=(s.positionAbsolute?.y??0)+y,S=g?.position,N=S?bu[S]:null;if(!S||!N)return null;if(r)return d.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:g,fromX:x,fromY:m,toX:a,toY:u,fromPosition:S,toPosition:N,connectionStatus:i});let w="";const A={sourceX:x,sourceY:m,sourcePosition:S,targetX:a,targetY:u,targetPosition:N};return o===Tt.Bezier?[w]=ar(A):o===Tt.Step?[w]=yn({...A,borderRadius:0}):o===Tt.SmoothStep?[w]=yn(A):o===Tt.SimpleBezier?[w]=cr(A):w=`M${x},${m} ${a},${u}`,d.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Br.displayName="ConnectionLine";const Nu=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Cu({containerStyle:t,style:e,type:n,component:o}){const{nodeId:r,handleType:i,nodesConnectable:s,width:c,height:a,connectionStatus:u}=J(Nu,ot);return!(r&&i&&c&&s)?null:d.createElement("svg",{style:t,width:c,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container"},d.createElement("g",{className:it(["react-flow__connection",u])},d.createElement(Br,{nodeId:r,handleType:i,style:e,type:n,CustomComponent:o,connectionStatus:u})))}function Mo(t,e){return d.useRef(null),nt(),d.useMemo(()=>e(t),[t])}const Or=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:c,onNodeDoubleClick:a,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:g,onSelectionContextMenu:_,onSelectionStart:y,onSelectionEnd:x,connectionLineType:m,connectionLineStyle:S,connectionLineComponent:N,connectionLineContainerStyle:w,selectionKeyCode:A,selectionOnDrag:C,selectionMode:z,multiSelectionKeyCode:H,panActivationKeyCode:$,zoomActivationKeyCode:V,deleteKeyCode:P,onlyRenderVisibleElements:B,elementsSelectable:D,selectNodesOnDrag:h,defaultViewport:b,translateExtent:v,minZoom:M,maxZoom:I,preventScrolling:E,defaultMarkerColor:T,zoomOnScroll:k,zoomOnPinch:R,panOnScroll:F,panOnScrollSpeed:O,panOnScrollMode:Z,zoomOnDoubleClick:U,panOnDrag:X,onPaneClick:q,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:rt,onPaneScroll:et,onPaneContextMenu:at,onEdgeContextMenu:st,onEdgeMouseEnter:tt,onEdgeMouseMove:ut,onEdgeMouseLeave:Q,onReconnect:L,onReconnectStart:lt,onReconnectEnd:xt,reconnectRadius:re,noDragClassName:Lt,noWheelClassName:Yt,noPanClassName:_t,elevateEdgesOnSelect:Zt,disableKeyboardA11y:kt,nodeOrigin:It,nodeExtent:Ut,rfId:Wt})=>{const ie=Mo(t,tu),ct=Mo(e,cu);return Su(i),d.createElement(Jl,{onPaneClick:q,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:rt,onPaneContextMenu:at,onPaneScroll:et,deleteKeyCode:P,selectionKeyCode:A,selectionOnDrag:C,selectionMode:z,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:H,panActivationKeyCode:$,zoomActivationKeyCode:V,elementsSelectable:D,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:k,zoomOnPinch:R,zoomOnDoubleClick:U,panOnScroll:F,panOnScrollSpeed:O,panOnScrollMode:Z,panOnDrag:X,defaultViewport:b,translateExtent:v,minZoom:M,maxZoom:I,onSelectionContextMenu:_,preventScrolling:E,noDragClassName:Lt,noWheelClassName:Yt,noPanClassName:_t,disableKeyboardA11y:kt},d.createElement(Eu,null,d.createElement(xu,{edgeTypes:ct,onEdgeClick:c,onEdgeDoubleClick:u,onlyRenderVisibleElements:B,onEdgeContextMenu:st,onEdgeMouseEnter:tt,onEdgeMouseMove:ut,onEdgeMouseLeave:Q,onReconnect:L,onReconnectStart:lt,onReconnectEnd:xt,reconnectRadius:re,defaultMarkerColor:T,noPanClassName:_t,elevateEdgesOnSelect:!!Zt,disableKeyboardA11y:kt,rfId:Wt},d.createElement(Cu,{style:S,type:m,component:N,containerStyle:w})),d.createElement("div",{className:"react-flow__edgelabel-renderer"}),d.createElement(ou,{nodeTypes:ie,onNodeClick:s,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:g,selectNodesOnDrag:h,onlyRenderVisibleElements:B,noPanClassName:_t,noDragClassName:Lt,disableKeyboardA11y:kt,nodeOrigin:It,nodeExtent:Ut,rfId:Wt})))};Or.displayName="GraphView";var Mu=d.memo(Or);const En=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Mt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:En,nodeExtent:En,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ft.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:el,isValidConnection:void 0},Au=()=>Li((t,e)=>({...Mt,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=e();t({nodeInternals:rn(n,o,r,i)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=e();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",i=typeof o<"u",s=r?rn(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:c,domNode:a,nodeOrigin:u}=e(),l=a?.querySelector(".react-flow__viewport");if(!l)return;const f=window.getComputedStyle(l),{m22:p}=new window.DOMMatrixReadOnly(f.transform),g=n.reduce((y,x)=>{const m=r.get(x.id);if(m?.hidden)r.set(m.id,{...m,[j]:{...m[j],handleBounds:void 0}});else if(m){const S=Tn(x.nodeElement);S.width&&S.height&&(m.width!==S.width||m.height!==S.height||x.forceUpdate)&&(r.set(m.id,{...m,[j]:{...m[j],handleBounds:{source:xo(".source",x.nodeElement,p,u),target:xo(".target",x.nodeElement,p,u)}},...S}),y.push({id:m.id,type:"dimensions",dimensions:S}))}return y},[]);Cr(r,u);const _=s||i&&!s&&Mr(e,{initial:!0,...c});t({nodeInternals:new Map(r),fitViewOnInitDone:_}),g?.length>0&&o?.(g)},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:i}=e(),s=n.map(c=>{const a={id:c.id,type:"position",dragging:r};return o&&(a.positionAbsolute=c.positionAbsolute,a.position=c.position),a});i(s)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:c,elevateNodesOnSelect:a}=e();if(n?.length){if(i){const u=Tr(n,c()),l=rn(u,r,s,a);t({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=e();let s,c=null;o?s=n.map(a=>At(a,!0)):(s=Jt(i(),n),c=Jt(r,[])),Ce({changedNodes:s,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=e();let s,c=null;o?s=n.map(a=>At(a,!0)):(s=Jt(r,n),c=Jt(i(),[])),Ce({changedNodes:c,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:i}=e(),s=n||i(),c=o||r,a=s.map(l=>(l.selected=!1,At(l.id,!1))),u=c.map(l=>At(l.id,!1));Ce({changedNodes:a,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=e();o?.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=e();o?.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=e(),i=o().filter(c=>c.selected).map(c=>At(c.id,!1)),s=n.filter(c=>c.selected).map(c=>At(c.id,!1));Ce({changedNodes:i,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=e();o.forEach(r=>{r.positionAbsolute=$n(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:i,d3Zoom:s,d3Selection:c,translateExtent:a}=e();if(!s||!c||!n.x&&!n.y)return!1;const u=bt.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,i]],f=s?.constrain()(u,l,a);return s.transform(c,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>t({connectionNodeId:Mt.connectionNodeId,connectionHandleId:Mt.connectionHandleId,connectionHandleType:Mt.connectionHandleType,connectionStatus:Mt.connectionStatus,connectionStartHandle:Mt.connectionStartHandle,connectionEndHandle:Mt.connectionEndHandle}),reset:()=>t({...Mt})}),Object.is),Fr=({children:t})=>{const e=d.useRef(null);return e.current||(e.current=Au()),d.createElement(Ga,{value:e.current},t)};Fr.displayName="ReactFlowProvider";const Lr=({children:t})=>d.useContext(Ze)?d.createElement(d.Fragment,null,t):d.createElement(Fr,null,t);Lr.displayName="ReactFlowWrapper";const Tu={input:vr,default:xn,output:_r,group:Hn},$u={default:Ve,straight:zn,step:In,smoothstep:Ue,simplebezier:kn},ku=[0,0],Iu=[15,15],zu={x:0,y:0,zoom:1},Ru={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Du=d.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=Tu,edgeTypes:s=$u,onNodeClick:c,onEdgeClick:a,onInit:u,onMove:l,onMoveStart:f,onMoveEnd:p,onConnect:g,onConnectStart:_,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:m,onNodeMouseEnter:S,onNodeMouseMove:N,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:C,onNodeDragStart:z,onNodeDrag:H,onNodeDragStop:$,onNodesDelete:V,onEdgesDelete:P,onSelectionChange:B,onSelectionDragStart:D,onSelectionDrag:h,onSelectionDragStop:b,onSelectionContextMenu:v,onSelectionStart:M,onSelectionEnd:I,connectionMode:E=Ft.Strict,connectionLineType:T=Tt.Bezier,connectionLineStyle:k,connectionLineComponent:R,connectionLineContainerStyle:F,deleteKeyCode:O="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:U=!1,selectionMode:X=we.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:K=He()?"Meta":"Control",zoomActivationKeyCode:G=He()?"Meta":"Control",snapToGrid:rt=!1,snapGrid:et=Iu,onlyRenderVisibleElements:at=!1,selectNodesOnDrag:st=!0,nodesDraggable:tt,nodesConnectable:ut,nodesFocusable:Q,nodeOrigin:L=ku,edgesFocusable:lt,edgesUpdatable:xt,elementsSelectable:re,defaultViewport:Lt=zu,minZoom:Yt=.5,maxZoom:_t=2,translateExtent:Zt=En,preventScrolling:kt=!0,nodeExtent:It,defaultMarkerColor:Ut="#b1b1b7",zoomOnScroll:Wt=!0,zoomOnPinch:ie=!0,panOnScroll:ct=!1,panOnScrollSpeed:yt=.5,panOnScrollMode:zt=Vt.Free,zoomOnDoubleClick:Rt=!0,panOnDrag:Xt=!0,onPaneClick:wt,onPaneMouseEnter:Dt,onPaneMouseMove:Xe,onPaneMouseLeave:Ge,onPaneScroll:se,onPaneContextMenu:Ke,children:Bn,onEdgeContextMenu:Ht,onEdgeDoubleClick:Gr,onEdgeMouseEnter:Kr,onEdgeMouseMove:qr,onEdgeMouseLeave:Qr,onEdgeUpdate:Jr,onEdgeUpdateStart:jr,onEdgeUpdateEnd:ti,onReconnect:ei,onReconnectStart:ni,onReconnectEnd:oi,reconnectRadius:ri=10,edgeUpdaterRadius:ii=10,onNodesChange:si,onEdgesChange:ci,noDragClassName:ai="nodrag",noWheelClassName:li="nowheel",noPanClassName:On="nopan",fitView:ui=!1,fitViewOptions:di,connectOnClick:fi=!0,attributionPosition:hi,proOptions:pi,defaultEdgeOptions:gi,elevateNodesOnSelect:mi=!0,elevateEdgesOnSelect:yi=!1,disableKeyboardA11y:Fn=!1,autoPanOnConnect:wi=!0,autoPanOnNodeDrag:vi=!0,connectionRadius:xi=20,isValidConnection:_i,onError:Ei,style:Si,id:Ln,nodeDragThreshold:bi,...Ni},Ci)=>{const qe=Ln||"1";return d.createElement("div",{...Ni,style:{...Si,...Ru},ref:Ci,className:it(["react-flow",r]),"data-testid":"rf__wrapper",id:Ln},d.createElement(Lr,null,d.createElement(Mu,{onInit:u,onMove:l,onMoveStart:f,onMoveEnd:p,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:S,onNodeMouseMove:N,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:s,connectionLineType:T,connectionLineStyle:k,connectionLineComponent:R,connectionLineContainerStyle:F,selectionKeyCode:Z,selectionOnDrag:U,selectionMode:X,deleteKeyCode:O,multiSelectionKeyCode:K,panActivationKeyCode:q,zoomActivationKeyCode:G,onlyRenderVisibleElements:at,selectNodesOnDrag:st,defaultViewport:Lt,translateExtent:Zt,minZoom:Yt,maxZoom:_t,preventScrolling:kt,zoomOnScroll:Wt,zoomOnPinch:ie,zoomOnDoubleClick:Rt,panOnScroll:ct,panOnScrollSpeed:yt,panOnScrollMode:zt,panOnDrag:Xt,onPaneClick:wt,onPaneMouseEnter:Dt,onPaneMouseMove:Xe,onPaneMouseLeave:Ge,onPaneScroll:se,onPaneContextMenu:Ke,onSelectionContextMenu:v,onSelectionStart:M,onSelectionEnd:I,onEdgeContextMenu:Ht,onEdgeDoubleClick:Gr,onEdgeMouseEnter:Kr,onEdgeMouseMove:qr,onEdgeMouseLeave:Qr,onReconnect:ei??Jr,onReconnectStart:ni??jr,onReconnectEnd:oi??ti,reconnectRadius:ri??ii,defaultMarkerColor:Ut,noDragClassName:ai,noWheelClassName:li,noPanClassName:On,elevateEdgesOnSelect:yi,rfId:qe,disableKeyboardA11y:Fn,nodeOrigin:L,nodeExtent:It}),d.createElement(bl,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:g,onConnectStart:_,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:m,nodesDraggable:tt,nodesConnectable:ut,nodesFocusable:Q,edgesFocusable:lt,edgesUpdatable:xt,elementsSelectable:re,elevateNodesOnSelect:mi,minZoom:Yt,maxZoom:_t,nodeExtent:It,onNodesChange:si,onEdgesChange:ci,snapToGrid:rt,snapGrid:et,connectionMode:E,translateExtent:Zt,connectOnClick:fi,defaultEdgeOptions:gi,fitView:ui,fitViewOptions:di,onNodesDelete:V,onEdgesDelete:P,onNodeDragStart:z,onNodeDrag:H,onNodeDragStop:$,onSelectionDrag:h,onSelectionDragStart:D,onSelectionDragStop:b,noPanClassName:On,nodeOrigin:L,rfId:qe,autoPanOnConnect:wi,autoPanOnNodeDrag:vi,onError:Ei,connectionRadius:xi,isValidConnection:_i,nodeDragThreshold:bi}),d.createElement(El,{onSelectionChange:B}),Bn,d.createElement(qa,{proOptions:pi,position:hi}),d.createElement(Tl,{rfId:qe,disableKeyboardA11y:Fn})))});Du.displayName="ReactFlow";function Yr(t){return e=>{const[n,o]=d.useState(e),r=d.useCallback(i=>o(s=>t(i,s)),[]);return[n,o,r]}}const rd=Yr(Tr),id=Yr(Yl),Zr=({id:t,x:e,y:n,width:o,height:r,style:i,color:s,strokeColor:c,strokeWidth:a,className:u,borderRadius:l,shapeRendering:f,onClick:p,selected:g})=>{const{background:_,backgroundColor:y}=i||{},x=s||_||y;return d.createElement("rect",{className:it(["react-flow__minimap-node",{selected:g},u]),x:e,y:n,rx:l,ry:l,width:o,height:r,fill:x,stroke:c,strokeWidth:a,shapeRendering:f,onClick:p?m=>p(m,t):void 0})};Zr.displayName="MiniMapNode";var Hu=d.memo(Zr);const Pu=t=>t.nodeOrigin,Vu=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),ln=t=>t instanceof Function?t:()=>t;function Bu({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r=2,nodeComponent:i=Hu,onClick:s}){const c=J(Vu,ot),a=J(Pu),u=ln(e),l=ln(t),f=ln(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.createElement(d.Fragment,null,c.map(g=>{const{x:_,y}=Bt(g,a).positionAbsolute;return d.createElement(i,{key:g.id,x:_,y,width:g.width,height:g.height,style:g.style,selected:g.selected,className:f(g),color:u(g),borderRadius:o,strokeColor:l(g),strokeWidth:r,shapeRendering:p,onClick:s,id:g.id})}))}var Ou=d.memo(Bu);const Fu=200,Lu=150,Yu=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?ja(We(e,t.nodeOrigin),n):n,rfId:t.rfId}},Zu="react-flow__minimap-desc";function Ur({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:o="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:c,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:l=1,position:f="bottom-right",onClick:p,onNodeClick:g,pannable:_=!1,zoomable:y=!1,ariaLabel:x="React Flow mini map",inversePan:m=!1,zoomStep:S=10,offsetScale:N=5}){const w=nt(),A=d.useRef(null),{boundingRect:C,viewBB:z,rfId:H}=J(Yu,ot),$=t?.width??Fu,V=t?.height??Lu,P=C.width/$,B=C.height/V,D=Math.max(P,B),h=D*$,b=D*V,v=N*D,M=C.x-(h-C.width)/2-v,I=C.y-(b-C.height)/2-v,E=h+v*2,T=b+v*2,k=`${Zu}-${H}`,R=d.useRef(0);R.current=D,d.useEffect(()=>{if(A.current){const Z=ft(A.current),U=K=>{const{transform:G,d3Selection:rt,d3Zoom:et}=w.getState();if(K.sourceEvent.type!=="wheel"||!rt||!et)return;const at=-K.sourceEvent.deltaY*(K.sourceEvent.deltaMode===1?.05:K.sourceEvent.deltaMode?1:.002)*S,st=G[2]*Math.pow(2,at);et.scaleTo(rt,st)},X=K=>{const{transform:G,d3Selection:rt,d3Zoom:et,translateExtent:at,width:st,height:tt}=w.getState();if(K.sourceEvent.type!=="mousemove"||!rt||!et)return;const ut=R.current*Math.max(1,G[2])*(m?-1:1),Q={x:G[0]-K.sourceEvent.movementX*ut,y:G[1]-K.sourceEvent.movementY*ut},L=[[0,0],[st,tt]],lt=bt.translate(Q.x,Q.y).scale(G[2]),xt=et.constrain()(lt,L,at);et.transform(rt,xt)},q=Qo().on("zoom",_?X:null).on("zoom.wheel",y?U:null);return Z.call(q),()=>{Z.on("zoom",null)}}},[_,y,m,S]);const F=p?Z=>{const U=pt(Z);p(Z,{x:U[0],y:U[1]})}:void 0,O=g?(Z,U)=>{const X=w.getState().nodeInternals.get(U);g(Z,X)}:void 0;return d.createElement(An,{position:f,style:t,className:it(["react-flow__minimap",e]),"data-testid":"rf__minimap"},d.createElement("svg",{width:$,height:V,viewBox:`${M} ${I} ${E} ${T}`,role:"img","aria-labelledby":k,ref:A,onClick:F},x&&d.createElement("title",{id:k},x),d.createElement(Ou,{onClick:O,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:c}),d.createElement("path",{className:"react-flow__minimap-mask",d:`M${M-v},${I-v}h${E+v*2}v${T+v*2}h${-E-v*2}z
        M${z.x},${z.y}h${z.width}v${z.height}h${-z.width}z`,fill:a,fillRule:"evenodd",stroke:u,strokeWidth:l,pointerEvents:"none"})))}Ur.displayName="MiniMap";var sd=d.memo(Ur);function Uu(){return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},d.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Wu(){return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},d.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Xu(){return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},d.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Gu(){return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},d.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ku(){return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},d.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const pe=({children:t,className:e,...n})=>d.createElement("button",{type:"button",className:it(["react-flow__controls-button",e]),...n},t);pe.displayName="ControlButton";const qu=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Wr=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:u,children:l,position:f="bottom-left"})=>{const p=nt(),[g,_]=d.useState(!1),{isInteractive:y,minZoomReached:x,maxZoomReached:m}=J(qu,ot),{zoomIn:S,zoomOut:N,fitView:w}=Pn();if(d.useEffect(()=>{_(!0)},[]),!g)return null;const A=()=>{S(),i?.()},C=()=>{N(),s?.()},z=()=>{w(r),c?.()},H=()=>{p.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),a?.(!y)};return d.createElement(An,{className:it(["react-flow__controls",u]),position:f,style:t,"data-testid":"rf__controls"},e&&d.createElement(d.Fragment,null,d.createElement(pe,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},d.createElement(Uu,null)),d.createElement(pe,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},d.createElement(Wu,null))),n&&d.createElement(pe,{className:"react-flow__controls-fitview",onClick:z,title:"fit view","aria-label":"fit view"},d.createElement(Xu,null)),o&&d.createElement(pe,{className:"react-flow__controls-interactive",onClick:H,title:"toggle interactivity","aria-label":"toggle interactivity"},y?d.createElement(Ku,null):d.createElement(Gu,null)),l)};Wr.displayName="Controls";var cd=d.memo(Wr),gt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(gt||(gt={}));function Qu({color:t,dimensions:e,lineWidth:n}){return d.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Ju({color:t,radius:e}){return d.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const ju={[gt.Dots]:"#91919a",[gt.Lines]:"#eee",[gt.Cross]:"#e2e2e2"},td={[gt.Dots]:1,[gt.Lines]:1,[gt.Cross]:6},ed=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Xr({id:t,variant:e=gt.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=2,color:s,style:c,className:a}){const u=d.useRef(null),{transform:l,patternId:f}=J(ed,ot),p=s||ju[e],g=o||td[e],_=e===gt.Dots,y=e===gt.Cross,x=Array.isArray(n)?n:[n,n],m=[x[0]*l[2]||1,x[1]*l[2]||1],S=g*l[2],N=y?[S,S]:m,w=_?[S/i,S/i]:[N[0]/i,N[1]/i];return d.createElement("svg",{className:it(["react-flow__background",a]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},d.createElement("pattern",{id:f+t,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},_?d.createElement(Ju,{color:p,radius:S/i}):d.createElement(Qu,{dimensions:N,color:p,lineWidth:r})),d.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+t})`}))}Xr.displayName="Background";var ad=d.memo(Xr);export{ad as B,cd as C,Be as H,Pe as M,Y as P,Du as R,id as a,fl as b,sd as c,zi as r,rd as u};
